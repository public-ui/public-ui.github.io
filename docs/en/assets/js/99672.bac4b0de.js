/*! For license information please see 99672.bac4b0de.js.LICENSE.txt */ "use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[99672],{99672:(e,t,r)=>{r.r(t),r.d(t,{kol_tree_wc:()=>l});var s=r(24236),a=r(75224);const l=class{constructor(e){(0,s.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,a.v)(this,e)}render(){return(0,s.h)(s.H,{onSlotchange:this.handleSlotchange.bind(this)},(0,s.h)("nav",{class:"tree","aria-label":this.state._label},(0,s.h)("ul",{class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,s.h)("slot",null))))}static isTreeItem(e){return(null==e?void 0:e.tagName)==="kol-tree-item".toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){this.getTopLevelTreeItems().forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e;return(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(l.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){return this.getTopLevelTreeItems().reduce(((e,t)=>{const r=t.querySelectorAll("kol-tree-item");return[...e,t,...r]}),[])}async getOpenTreeItemElements(){if(!this.treeItemElements)return;const e=async t=>!l.isTreeItem(t.parentElement)||await t.parentElement.isOpen()&&await e(t.parentElement);return(await Promise.all(this.treeItemElements.map((async t=>({value:t,include:await e(t)}))))).filter((e=>e.include)).map((e=>e.value))}async handleKeyDown(e){var t,r,s,a;const l=await this.getOpenTreeItemElements(),i=null===(t=document.activeElement)||void 0===t?void 0:t.closest("kol-tree-item");if(!l||!i)return;const n=null==l?void 0:l.findIndex((e=>e===i));switch(e.key){case"ArrowDown":await(null===(r=l[n+1])||void 0===r?void 0:r.focusLink()),e.preventDefault();break;case"ArrowUp":await(null===(s=l[n-1])||void 0===s?void 0:s.focusLink()),e.preventDefault();break;case"ArrowRight":await i.expand(),e.preventDefault();break;case"ArrowLeft":await i.collapse(),e.preventDefault();break;case"*":{const e=null===(a=i.parentElement)||void 0===a?void 0:a.querySelectorAll("kol-tree-item");null==e||e.forEach((e=>{e.expand()}));break}}}async handleFocusOut(e){e.relatedTarget&&!e.relatedTarget.closest("kol-tree")&&await this.ensureActiveItemVisibility()}async ensureActiveItemVisibility(){const e=t=>{l.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e;const t=(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(l.isTreeItem);for(const r of t){if(r._active)return r;const e=r.querySelector('kol-tree-item[_active="true"]');if(e&&e._active)return e}})();t&&e(t)}get host(){return(0,s.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}}}]);