/*! For license information please see 30332.572fff92.js.LICENSE.txt */ "use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[30332],{52712:(e,t,a)=>{a.r(t),a.d(t,{kol_tree_wc:()=>l});var r=a(29340),s=a(34408);const l=class{constructor(e){(0,r.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,s.v)(this,e)}render(){return(0,r.h)(r.H,{key:"e391d74cc93848c2f609b8a051c9f6b604c148ae",onSlotchange:this.handleSlotchange.bind(this),class:"kol-tree-wc"},(0,r.h)("nav",{key:"7cf0b4397895d3d40309b2ca9163f20358773fb5",class:"tree","aria-label":this.state._label},(0,r.h)("ul",{key:"38bfd77edaa1ee592eca542fad16fd0b5f3a80e6",class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,r.h)("slot",{key:"9ab7629d4bea7e7877470cf9852e2494af585350"}))))}static isTreeItem(e){return(null==e?void 0:e.tagName)==="kol-tree-item".toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){this.getTopLevelTreeItems().forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e;return(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(l.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){return this.getTopLevelTreeItems().reduce(((e,t)=>{const a=t.querySelectorAll("kol-tree-item");return[...e,t,...a]}),[])}async getOpenTreeItemElements(){if(!this.treeItemElements)return;const e=async t=>!l.isTreeItem(t.parentElement)||await t.parentElement.isOpen()&&await e(t.parentElement);return(await Promise.all(this.treeItemElements.map((async t=>({value:t,include:await e(t)}))))).filter((e=>e.include)).map((e=>e.value))}async handleKeyDown(e){var t,a,r,s;const l=await this.getOpenTreeItemElements(),i=null===(t=document.activeElement)||void 0===t?void 0:t.closest("kol-tree-item");if(!l||!i)return;const n=null==l?void 0:l.findIndex((e=>e===i));switch(e.key){case"ArrowDown":await(null===(a=l[n+1])||void 0===a?void 0:a.focusLink()),e.preventDefault();break;case"ArrowUp":await(null===(r=l[n-1])||void 0===r?void 0:r.focusLink()),e.preventDefault();break;case"ArrowRight":await i.expand(),e.preventDefault();break;case"ArrowLeft":await i.collapse(),e.preventDefault();break;case"*":{const e=null===(s=i.parentElement)||void 0===s?void 0:s.querySelectorAll("kol-tree-item");null==e||e.forEach((e=>{e.expand()}));break}}}async handleFocusOut(e){e.relatedTarget&&!e.relatedTarget.closest("kol-tree")&&await this.ensureActiveItemVisibility()}async ensureActiveItemVisibility(){const e=t=>{l.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e;const t=(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(l.isTreeItem);for(const a of t){if(a._active)return a;const e=a.querySelector('kol-tree-item[_active="true"]');if(e&&e._active)return e}})();t&&e(t)}get host(){return(0,r.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}}}]);