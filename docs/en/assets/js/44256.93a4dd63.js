/*! For license information please see 44256.93a4dd63.js.LICENSE.txt */ "use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[44256],{44256:(e,t,a)=>{a.r(t),a.d(t,{kol_tree_wc:()=>i});var r=a(91388),s=a(32924);const i=class{constructor(e){(0,r.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,s.v)(this,e)}render(){return(0,r.h)(r.H,{key:"e60c77ae0b5a99ffcfe98db836cb9ea1cd4c4149",onSlotchange:this.handleSlotchange.bind(this)},(0,r.h)("nav",{key:"f192d670742c7e304b5f8b9571e16e4cce60d37b",class:"tree","aria-label":this.state._label},(0,r.h)("ul",{key:"0099533c1bfd1691818656555c92b2caf39770ae",class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,r.h)("slot",{key:"e05b65f5929d98f0cab0c76f08622c5b312986bc"}))))}static isTreeItem(e){return(null==e?void 0:e.tagName)==="kol-tree-item".toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){this.getTopLevelTreeItems().forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e;return(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(i.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){return this.getTopLevelTreeItems().reduce(((e,t)=>{const a=t.querySelectorAll("kol-tree-item");return[...e,t,...a]}),[])}async getOpenTreeItemElements(){if(!this.treeItemElements)return;const e=async t=>!i.isTreeItem(t.parentElement)||await t.parentElement.isOpen()&&await e(t.parentElement);return(await Promise.all(this.treeItemElements.map((async t=>({value:t,include:await e(t)}))))).filter((e=>e.include)).map((e=>e.value))}async handleKeyDown(e){var t,a,r,s;const i=await this.getOpenTreeItemElements(),l=null===(t=document.activeElement)||void 0===t?void 0:t.closest("kol-tree-item");if(!i||!l)return;const n=null==i?void 0:i.findIndex((e=>e===l));switch(e.key){case"ArrowDown":await(null===(a=i[n+1])||void 0===a?void 0:a.focusLink()),e.preventDefault();break;case"ArrowUp":await(null===(r=i[n-1])||void 0===r?void 0:r.focusLink()),e.preventDefault();break;case"ArrowRight":await l.expand(),e.preventDefault();break;case"ArrowLeft":await l.collapse(),e.preventDefault();break;case"*":{const e=null===(s=l.parentElement)||void 0===s?void 0:s.querySelectorAll("kol-tree-item");null==e||e.forEach((e=>{e.expand()}));break}}}async handleFocusOut(e){e.relatedTarget&&!e.relatedTarget.closest("kol-tree")&&await this.ensureActiveItemVisibility()}async ensureActiveItemVisibility(){const e=t=>{i.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e;const t=(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(i.isTreeItem);for(const a of t){if(a._active)return a;const e=a.querySelector('kol-tree-item[_active="true"]');if(e&&e._active)return e}})();t&&e(t)}get host(){return(0,r.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}}}]);