!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).LeanUpForm={})}(this,(function(t){"use strict";var e,r,n,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o={exports:{}};r=s,n=function(){var t=function(){},e="undefined",r=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function s(t,e){var r=t[e];if("function"==typeof r.bind)return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch(n){return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(e,r){for(var s=0;s<n.length;s++){var o=n[s];this[o]=s<e?t:this.methodFactory(o,e,r)}this.log=this.debug}function a(t,r,n){return function(){typeof console!==e&&(i.call(this,r,n),this[t].apply(this,arguments))}}function l(n,i,l){return function(n){return"debug"===n&&(n="log"),typeof console!==e&&("trace"===n&&r?o:void 0!==console[n]?s(console,n):void 0!==console.log?s(console,"log"):t)}(n)||a.apply(this,arguments)}function h(t,r,s){var o,a=this,h="loglevel";function c(){var t;if(typeof window!==e&&h){try{t=window.localStorage[h]}catch(s){}if(typeof t===e)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(h)+"=");-1!==n&&(t=/^([^;]+)/.exec(r.slice(n))[1])}catch(s){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?h+=":"+t:"symbol"==typeof t&&(h=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=s||l,a.getLevel=function(){return o},a.setLevel=function(r,s){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(o=r,!1!==s&&function(t){var r=(n[t]||"silent").toUpperCase();if(typeof window!==e&&h){try{return void(window.localStorage[h]=r)}catch(s){}try{window.document.cookie=encodeURIComponent(h)+"="+r+";"}catch(s){}}}(r),i.call(a,r,t),typeof console===e&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){c()||a.setLevel(t,!1)},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var d=c();null==d&&(d=null==r?"WARN":r),a.setLevel(d,!1)}var c=new h,d={};c.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new h(t,c.getLevel(),c.methodFactory)),e};var u=typeof window!==e?window.log:void 0;return c.noConflict=function(){return typeof window!==e&&window.log===c&&(window.log=u),c},c.getLoggers=function(){return d},c.default=c,c},(e=o).exports?e.exports=n():r.log=n();class i{constructor(){}static isNumber(t){return!1===isNaN(t)&&"number"==typeof t}static isArray(t,e=0){return Array.isArray(t)&&t.length>=e}static isObject(t){return"object"==typeof t&&null!==t&&!1===this.isArray(t)}static isString(t,e=0){return"string"==typeof t&&t.length>=e}}const a=[];class l{constructor(){}static log(t,e){switch(i.isObject(e.refObject)&&"function"==typeof e.refObject.constructor&&i.isString(e.refObject.constructor.name)&&(e.className=`[${e.refObject.constructor.name}]:`),a.push({date:(new Date).toUTCString(),level:t,message:e}),t){case"trace":o.exports.trace(e);break;case"debug":o.exports.debug(e);break;case"info":o.exports.info(e);break;case"warn":o.exports.warn(e);break;case"error":o.exports.error(e)}}static trace(t,e){return this.log("trace",{messageText:t,refObject:e}),this}static debug(t,e){return this.log("debug",{messageText:t,refObject:e}),this}static info(t,e){return this.log("info",{messageText:t,refObject:e}),this}static warn(t,e){return this.log("warn",{messageText:t,refObject:e}),this}static error(t,e){return this.log("error",{messageText:t,refObject:e}),this}static get cache(){return[].concat(a)}}function h(t){return t instanceof c?t.get():Array.isArray(t)?t:[t]}l._instance=null;class c{constructor(t){this._instancesOf=[],this._items=[],this._protectedItems=[],this._instancesOf=Array.isArray(t)?t:[t]}get empty(){return 0===this._items.length}get first(){return this._items.length>0?this._items[0]:null}forEach(t){this._items.forEach(t)}filter(t){return this._items.filter(t)}find(t){return this._items.find(t)}get last(){return this._items.length>0?this._items[this._items.length-1]:null}get length(){return this._items.length}add(t,e=!1){return h(t).filter((t=>{let r=!1;return!1===this.contains(t)?function(t,e){return!!i.isArray(t)&&void 0!==t.find((t=>e instanceof t))}(this._instancesOf,t)?(e&&this._protectedItems.push(t),this._items.push(t),r=!0):l.debug("The item does not have a valid instance type.",this):l.debug("The item is already in the list.",this),r})).length>0}remove(t){return h(t).filter((t=>{let e=!1,r=this._protectedItems.indexOf(t);return-1===r?(r=this._items.indexOf(t),r>=0?(this._items.splice(r,1),e=!0):l.debug("The item is not in the list.",this)):l.debug("The item is protected and cannot be removed.",this),e})).length>0}set(t,e=!1){const r=this.clear(),n=this.add(t,e);return r||n}get(t){return!1===isNaN(t)&&"number"==typeof t?this._items.slice(0,t):this._items}clear(){const t=this._items.length;return this._items=this._items.filter((t=>this._protectedItems.indexOf(t)>=0)),t!==this._items.length}contains(t){return this._items.indexOf(t)>-1}}class d{}class u{constructor(){this.formatters=new c(d)}format(t){return this.formatters.forEach((e=>{t=e.format(t)})),t}parse(t){return this.formatters.forEach((e=>{t=e.parse(t)})),t}}class f{constructor(t){this.state={message:"Ein unbekannter Fehler ist aufgetreten."},this.message=t}set message(t){i.isString(t,1)?this.state.message=t:l.debug("")}get message(){return this.state.message}}class g{constructor(){this.validators=new c(f)}validate(t,e=!1){const r=[];try{this.validators.forEach((n=>{if(!1===n.isValid(t)&&(r.push(n.message),!0===e))throw new Error("Only one error is enough. Be quick and stop the execution of other validation functions.")}))}catch(n){}return r}}class m{constructor(t){this.changeListeners=new c(Function),this._errors=new Set,this._parentForms=[],this._name="unnamed",this._validationHandler=new g,this._notifyTimeout=setTimeout((()=>{}),0),this.name=t}get name(){return this._name}set name(t){if("string"!=typeof t)throw new Error("The name of a control must be a string.");if(!(t.length>0))throw new Error("The name of a control must have a min-length of 1.");this._name=t}get error(){return this._errors.size>0?this._errors.values().next().value:null}getErrors(){return this._errors}get id(){let t=this.name;return this._parentForms.length>0&&(t=`${this._parentForms[0].id}_${t}`),t}get valid(){return 0===this._errors.size}es5isValid(){return 0===this._errors.size}findMeInParentForm(t){if(this===t)return!0;if(t instanceof y){const e=[];return this._parentForms.forEach((r=>{!0===r.findMeInParentForm(t)&&e.push(r)})),e.length>0}return!1}addParentForm(t){if(!1!==this._parentForms.includes(t))throw new Error(`An form control with the name '${t.name}' already exists.`);if(!1!==t.findMeInParentForm(this))throw new Error(`The same form control (${t.name}) leads to a form control loop.`);this._parentForms.push(t)}removeParentForm(t){const e=this._parentForms.indexOf(t);if(!(e>=0))throw new Error(`An form control with the name '${t.name}' does not exists.`);this._parentForms.splice(e,1)}setValidationHandler(t,e=null){this._validationHandler=t,this.validate(e)}validate(t){this._errors.clear(),this._validationHandler.validate(t).forEach((t=>{this._errors.add(t)})),this._parentForms.forEach((e=>{e.validate(t)}))}notify(){this._notifyTimeout&&clearTimeout(this._notifyTimeout),this._notifyTimeout=setTimeout((()=>{this.changeListeners.forEach((t=>{t()}))}),0)}}t.InputControlTypes=void 0,function(t){t.checkbox="checkbox",t.date="date",t.email="email",t.number="number",t.password="password",t.radio="radio",t.select="select",t.slider="slider",t.text="text"}(t.InputControlTypes||(t.InputControlTypes={}));class p extends m{constructor(t,e){super(t),this._disabled=!1,this._info="",this._label="",this._mandatory=!1,this._placeholder="",this._readonly=!1,this._type="text",this._value=null,this._oldValue=null,this._valueTimeout=setTimeout((()=>{}),0),this._formatHandler=new u,e&&(this.info=e.info?e.info:"",this.label=e.label?e.label:"",this.disabled=!!e.disabled&&e.disabled,this.mandatory=!!e.mandatory&&e.mandatory,this.readonly=!!e.readonly&&e.readonly,this.placeholder=e.placeholder?e.placeholder:"",this.type=e.type?e.type:"text",this.value=e.value?e.value:null)}get info(){return this._info}set info(t){if("string"!=typeof t)throw new Error("The info of a input control must be a string.");this._info=t,this.notify()}get disabled(){return this._disabled}set disabled(t){if("boolean"!=typeof t)throw new Error("The disabled flag of a input control must be a string.");this._disabled=t,this.notify()}get mandatory(){return this._mandatory}set mandatory(t){if("boolean"!=typeof t)throw new Error("The mandatory flag of a input control must be a string.");this._mandatory=t,this.notify()}get readonly(){return this._readonly}set readonly(t){if("boolean"!=typeof t)throw new Error("The readonly flag of a input control must be a string.");this._readonly=t,this.notify()}get label(){return this._label}set label(t){if("string"!=typeof t)throw new Error("The label of a input control must be a string.");this._label=t,this.notify()}get placeholder(){return this._placeholder}set placeholder(t){if("string"!=typeof t)throw new Error("The placeholder of a input control must be a string.");this._placeholder=t,this.notify()}get type(){return this._type.toString()}set type(t){if("string"!=typeof t)throw new Error("The type of a input control must be a string.");switch(t){case"checkbox":case"date":case"email":case"number":case"password":case"radio":case"select":case"slider":case"text":this._type=t,this.notify();break;default:throw new Error("The type of a input control must be a of the following types: ???.")}}get oldValue(){return this._oldValue}get value(){return this._value}set value(t){this._valueTimeout&&clearTimeout(this._valueTimeout),this._valueTimeout=setTimeout((()=>{this.validate(t),this._oldValue=this._value,this._value=t,this.notify()}),0)}get modelValue(){return this.value}set modelValue(t){this.value=t}get viewValue(){return this._formatHandler.format(this.modelValue)}set viewValue(t){this.modelValue=this._formatHandler.parse(t)}setValidationHandler(t){super.setValidationHandler(t,this.value)}setFormatHandler(t){this._formatHandler=t}}class y extends m{constructor(){super(...arguments),this.controls=new c([y,p])}get disabled(){return 0===this.controls.filter((t=>!1===t.disabled)).length}set disabled(t){this.controls.forEach((e=>{e.disabled=t}))}get readonly(){return 0===this.controls.filter((t=>!1===t.readonly)).length}set readonly(t){this.controls.forEach((e=>{e.readonly=t}))}get valid(){return this.es5isValid()&&0===this.controls.filter((t=>!1===t.valid)).length}addConrol(t){if(!1!==this.controls.contains(t))throw new Error(`A control with the same name '${t.name}' already exists.`);t.addParentForm(this),this.controls.add(t)}removeControl(t){if(!0!==this.controls.contains(t))throw new Error(`A control with the name '${t.name}' does not exists.`);t instanceof m&&(t.removeParentForm(this),this.controls.remove(t))}getControls(){return this.controls.get()}getControl(t){return this.controls.find((e=>e.name===t))}setData(t){console.log("FormControl.setData is currently not implemented.")}getData(){const t={};return this.controls.forEach((e=>{if(e instanceof y)t[e.name]=e.getData();else{if(!(e instanceof p))throw new Error("The control is neither an instance of FormControl or InputControl.");t[e.name]=e.value}})),t}setValidationHandler(t){super.setValidationHandler(t)}}class _{static createForm(t,e){const r=new y(t);for(const n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]&&null!==e[n])r.addConrol(_.createForm(n,e[n]));else{const t=new p(n);t.value=e[n],r.addConrol(t)}return r}}class v extends d{constructor(){super(...arguments),this.regExp=/([A-Z0-9]{1,4})/gi}format(t){if("string"==typeof t){const e=t.match(this.regExp);if(Array.isArray(e))return null==e?void 0:e.join(" ")}return t}parse(t){return"string"==typeof t?t.replace(/ /g,""):t}}const w=new v;class b extends f{constructor(t="Bitte tragen Sie einen Wert ein."){super(t)}isValid(t){return null!=t&&t.toString().length>0}}const E=new b;class x extends f{isValid(t){return!1===E.isValid(t)||this.validate(t)}}class T extends x{constructor(t,e="Bitte tragen Sie einen g\xfcltigen Wert ein."){super(e),this._regExp=/^/g,this.regExp=t}set regExp(t){t instanceof RegExp?this._regExp=t:l.debug("The regExp of the pattern validator should be type of RegExp.")}get regExp(){return this._regExp}validate(t){return this.regExp.test(t)}}const A=/^\d+$/;class F extends T{constructor(t="Der Wert ist keine Zahl."){super(A,t)}}const V=new F,I=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;t.AbstractFormatter=d,t.AbstractValidator=f,t.DEFAULT_DIGITS_VALIDATOR=V,t.DEFAULT_IBAN_FORMATTER=w,t.DEFAULT_REQUIRED_VALIDATOR=E,t.DIGITS_VALIDATION_REGEXP=A,t.DigitsValidator=F,t.EMAIL_VALIDATION_REGEXP=I,t.EmailValidator=class extends T{constructor(t="Die E-Mail-Adresse hat nicht das richtige Format."){super(I,t)}},t.FormControl=y,t.FormFactory=_,t.FormatHandler=u,t.IbanFormatter=v,t.InputControl=p,t.IsTrueValidator=class extends x{constructor(t="Bitte best\xe4tigen Sie."){super(t)}validate(t){return!0===t}},t.MaxLengthValidator=class extends x{constructor(t,e=`Die Eingabe darf nicht l\xe4nger als ${t} Zeichen sein.`){super(e),this.maxLength=t}validate(t){return i.isString(t)&&t.length<=this.maxLength}},t.MinLengthValidator=class extends x{constructor(t,e=`Die Eingabe darf nicht k\xfcrzer als ${t} Zeichen sein.`){super(e),this.minLength=t}validate(t){return i.isString(t)&&t.length>=this.minLength}},t.NonRequiredValidator=x,t.NotPatternValidator=class extends T{validate(t){return!1===super.validate(t)}},t.NotValidator=class extends x{constructor(t,e){super(e),this.validator=t}validate(t){return!1===this.validator.isValid(t)}},t.PatternValidator=T,t.RequiredValidator=b,t.ValidationHandler=g,Object.defineProperty(t,"__esModule",{value:!0})}));