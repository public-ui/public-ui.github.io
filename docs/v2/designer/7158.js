/*! For license information please see 7158.js.LICENSE.txt */
"use strict";(self.webpackChunk_public_ui_designer=self.webpackChunk_public_ui_designer||[]).push([[7158],{77158:(e,t,n)=>{n.r(t),n.d(t,{kol_tree_wc:()=>a});var l=n(42020),i=n(77420),r=(e,t,n)=>new Promise(((l,i)=>{var r=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,s);a((n=n.apply(e,t)).next())}));const s="kol-tree-item",a=class{constructor(e){(0,l.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,i.v)(this,e)}render(){return(0,l.h)(l.H,{key:"7c9d73edb4c812b2dbb0c14fd7d23d74d8bfea7b",onSlotchange:this.handleSlotchange.bind(this),class:"kol-tree-wc"},(0,l.h)("nav",{key:"b52bf9bda7e966e098509d135b9ea6ae80e5f530",class:"tree","aria-label":this.state._label},(0,l.h)("ul",{key:"2a9f9e5f0bf2dfa56d41bf5d371c18bdc60e0da9",class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,l.h)("slot",{key:"c114c9fab49fb6298c97851e2d08a800d54e06b2"}))))}static isTreeItem(e){return(null==e?void 0:e.tagName)===s.toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){this.getTopLevelTreeItems().forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e;return(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(a.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){return this.getTopLevelTreeItems().reduce(((e,t)=>{const n=t.querySelectorAll(s);return[...e,t,...n]}),[])}getOpenTreeItemElements(){return r(this,null,(function*(){if(!this.treeItemElements)return;const e=t=>r(this,null,(function*(){return!a.isTreeItem(t.parentElement)||(yield t.parentElement.isOpen())&&(yield e(t.parentElement))}));return(yield Promise.all(this.treeItemElements.map((t=>r(this,null,(function*(){return{value:t,include:yield e(t)}})))))).filter((e=>e.include)).map((e=>e.value))}))}handleKeyDown(e){return r(this,null,(function*(){var t,n,l,i,r,a,o,c,d;const u=yield this.getOpenTreeItemElements(),h=null===(t=document.activeElement)||void 0===t?void 0:t.closest(s);if(!u||!h)return;const v=null==u?void 0:u.findIndex((e=>e===h));switch(e.key){case"ArrowDown":yield null===(n=u[v+1])||void 0===n?void 0:n.focusLink(),e.preventDefault();break;case"ArrowUp":yield null===(l=u[v-1])||void 0===l?void 0:l.focusLink(),e.preventDefault();break;case"Right":case"ArrowRight":e.preventDefault(),(yield h.isOpen())?yield null===(i=u[v+1])||void 0===i?void 0:i.focusLink():yield h.expand();break;case"Left":case"ArrowLeft":if(e.preventDefault(),yield h.isOpen())yield h.collapse();else{const e=u.findIndex((e=>e===h.parentElement));-1!==e&&(yield null===(r=u[e])||void 0===r?void 0:r.focusLink())}break;case"Home":yield null===(a=u[0])||void 0===a?void 0:a.focusLink(),e.preventDefault();break;case"End":yield null===(o=u[u.length-1])||void 0===o?void 0:o.focusLink(),e.preventDefault();break;case null===(c=e.key.match(/[a-zA-Z0-9]/))||void 0===c?void 0:c.input:{const t=e.key.toLowerCase(),n=u.indexOf(h)+1,l=u.concat(u),i=l.slice(n,n+u.length).findIndex((e=>{var n;return null===(n=e.getAttribute("_label"))||void 0===n?void 0:n.trim().toLowerCase().startsWith(t)}));-1!==i&&(yield l[n+i].focusLink(),e.preventDefault());break}case"*":{const e=null===(d=h.parentElement)||void 0===d?void 0:d.querySelectorAll(s);null==e||e.forEach((e=>{e.expand()}));break}}}))}handleFocusOut(e){return r(this,null,(function*(){e.relatedTarget&&!e.relatedTarget.closest("kol-tree")&&(yield this.ensureActiveItemVisibility())}))}ensureActiveItemVisibility(){return r(this,null,(function*(){const e=t=>{a.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e;const t=(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(a.isTreeItem);for(const e of t){if(e._active)return e;const t=e.querySelector('kol-tree-item[_active="true"]');if(t&&t._active)return t}})();t&&e(t)}))}get host(){return(0,l.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}},77420:(e,t,n)=>{n.d(t,{a:()=>u,b:()=>a,c:()=>o,h:()=>i,v:()=>d});var l=n(85036);const i=[0,1,2,3,4,5,6],r=/[a-zA-Z0-9äöüÄÖÜß]/g,s=/^\d+$/;function a(e,t=1){return function(e){var t;return"string"==typeof e&&(null===(t=e.match(r))||void 0===t?void 0:t.length)||0}(e)>=t}function o(e){return s.test(e)}const c=new Set(["string"]),d=(e,t,n={})=>{(0,l.w)(e,"_label",(e=>"string"==typeof e),c,t,function(e){var t;return Object.assign(Object.assign({},e),{hooks:{afterPatch:(t,n,i,r)=>{var s,c;"function"==typeof(null===(s=e.hooks)||void 0===s?void 0:s.afterPatch)&&(null===(c=e.hooks)||void 0===c||c.afterPatch(t,n,i,r)),"string"==typeof t&&!1===a(t,3)&&!1===o(t)&&(0,l.a)(`The heading or label ("${t}") is not accessible. A label should consist of at least three readable characters.`),"string"==typeof t&&t.length>80&&(0,l.u)("A heading or label should not be longer than 80 characters.")},beforePatch:null===(t=e.hooks)||void 0===t?void 0:t.beforePatch}})}(n))},u=d}}]);