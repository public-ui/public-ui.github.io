/*! For license information please see 8918.js.LICENSE.txt */
"use strict";(self.webpackChunk_public_ui_designer=self.webpackChunk_public_ui_designer||[]).push([[8918],{38918:(e,t,l)=>{l.r(t),l.d(t,{kol_tree_wc:()=>a});var n=l(25744),i=l(21359),r=l(40584),s=(e,t,l)=>new Promise(((n,i)=>{var r=e=>{try{a(l.next(e))}catch(e){i(e)}},s=e=>{try{a(l.throw(e))}catch(e){i(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,s);a((l=l.apply(e,t)).next())}));const a=class{constructor(e){(0,n.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,r.v)(this,e)}render(){return(0,n.h)(n.H,{key:"bf4a2dfe1c75d4ff29a1d368fd86561061893e6e",onSlotchange:this.handleSlotchange.bind(this),class:"kol-tree-wc"},(0,n.h)("nav",{key:"8cd53949fc21b0019dcecc9e2a415e08de81d123",class:"tree","aria-label":this.state._label},(0,n.h)("ul",{key:"82e32b092e2a79fc329540612e01e0f7487c1e20",class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,n.h)("slot",{key:"7cd82152a9915a2e33dc231b1c324427549d688b"}))))}static isTreeItem(e){return(null==e?void 0:e.tagName)===i.z.toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){var e;null===(e=this.getTopLevelTreeItems())||void 0===e||e.forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e,t,l;return null===(l=null===(t=null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes)||void 0===t?void 0:t.call(e))||void 0===l?void 0:l.filter(a.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){var e;return null===(e=this.getTopLevelTreeItems())||void 0===e?void 0:e.reduce(((e,t)=>{const l=t.querySelectorAll(i.z);return[...e,t,...l]}),[])}getOpenTreeItemElements(){return s(this,null,(function*(){if(!this.treeItemElements)return;const e=t=>s(this,null,(function*(){return!a.isTreeItem(t.parentElement)||(yield t.parentElement.isOpen())&&(yield e(t.parentElement))}));return(yield Promise.all(this.treeItemElements.map((t=>s(this,null,(function*(){return{value:t,include:yield e(t)}})))))).filter((e=>e.include)).map((e=>e.value))}))}handleKeyDown(e){return s(this,null,(function*(){var t,l,n,r,s,a,o,d,c;const u=yield this.getOpenTreeItemElements(),v=null===(t=document.activeElement)||void 0===t?void 0:t.closest(i.z);if(!u||!v)return;const h=null==u?void 0:u.findIndex((e=>e===v));switch(e.key){case"ArrowDown":yield null===(l=u[h+1])||void 0===l?void 0:l.focusLink(),e.preventDefault();break;case"ArrowUp":yield null===(n=u[h-1])||void 0===n?void 0:n.focusLink(),e.preventDefault();break;case"Right":case"ArrowRight":e.preventDefault(),(yield v.isOpen())?yield null===(r=u[h+1])||void 0===r?void 0:r.focusLink():yield v.expand();break;case"Left":case"ArrowLeft":if(e.preventDefault(),yield v.isOpen())yield v.collapse();else{const e=u.findIndex((e=>e===v.parentElement));-1!==e&&(yield null===(s=u[e])||void 0===s?void 0:s.focusLink())}break;case"Home":yield null===(a=u[0])||void 0===a?void 0:a.focusLink(),e.preventDefault();break;case"End":yield null===(o=u[u.length-1])||void 0===o?void 0:o.focusLink(),e.preventDefault();break;case null===(d=e.key.match(/[a-zA-Z0-9]/))||void 0===d?void 0:d.input:{const t=e.key.toLowerCase(),l=u.indexOf(v)+1,n=u.concat(u),i=n.slice(l,l+u.length).findIndex((e=>{var l;return null===(l=e.getAttribute("_label"))||void 0===l?void 0:l.trim().toLowerCase().startsWith(t)}));-1!==i&&(yield n[l+i].focusLink(),e.preventDefault());break}case"*":{const e=null===(c=v.parentElement)||void 0===c?void 0:c.querySelectorAll(i.z);null==e||e.forEach((e=>{e.expand()}));break}}}))}handleFocusOut(e){return s(this,null,(function*(){e.relatedTarget&&!e.relatedTarget.closest(i.y)&&(yield this.ensureActiveItemVisibility())}))}ensureActiveItemVisibility(){return s(this,null,(function*(){const e=t=>{a.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e,t,l,n;const r=null!==(n=null===(l=null===(t=null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes)||void 0===t?void 0:t.call(e))||void 0===l?void 0:l.filter(a.isTreeItem))&&void 0!==n?n:[];for(const e of r){if(e._active)return e;const t=e.querySelector(`${i.z}[_active="true"]`);if(t&&t._active)return t}})();t&&e(t)}))}get host(){return(0,n.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}},40584:(e,t,l)=>{l.d(t,{a:()=>u,b:()=>a,c:()=>o,h:()=>i,v:()=>c});var n=l(95631);const i=[0,1,2,3,4,5,6],r=/[a-zA-Z0-9äöüÄÖÜß]/g,s=/^\d+$/;function a(e,t=1){return function(e){var t;return"string"==typeof e&&(null===(t=e.match(r))||void 0===t?void 0:t.length)||0}(e)>=t}function o(e){return s.test(e)}const d=new Set(["string"]),c=(e,t,l={})=>{(0,n.w)(e,"_label",(e=>"string"==typeof e),d,t,function(e){var t;return Object.assign(Object.assign({},e),{hooks:{afterPatch:(t,l,i,r)=>{var s,d;"function"==typeof(null===(s=e.hooks)||void 0===s?void 0:s.afterPatch)&&(null===(d=e.hooks)||void 0===d||d.afterPatch(t,l,i,r)),"string"==typeof t&&!1===a(t,3)&&!1===o(t)&&(0,n.a)(`The heading or label ("${t}") is not accessible. A label should consist of at least three readable characters.`),"string"==typeof t&&t.length>80&&(0,n.u)("A heading or label should not be longer than 80 characters.")},beforePatch:null===(t=e.hooks)||void 0===t?void 0:t.beforePatch}})}(l))},u=c}}]);