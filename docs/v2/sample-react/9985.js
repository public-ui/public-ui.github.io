/*! For license information please see 9985.js.LICENSE.txt */
"use strict";(self.webpackChunk_public_ui_sample_react=self.webpackChunk_public_ui_sample_react||[]).push([[9985],{9985:(e,t,l)=>{l.r(t),l.d(t,{kol_tree_wc:()=>n});var r=l(6120),i=l(5587),s=(e,t,l)=>new Promise(((r,i)=>{var s=e=>{try{a(l.next(e))}catch(e){i(e)}},n=e=>{try{a(l.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,n);a((l=l.apply(e,t)).next())}));const n=class{constructor(e){(0,r.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,i.v)(this,e)}render(){return(0,r.h)(r.H,{key:"ec5b4714c09d7f83acaa1ae8eae70980400b3969",onSlotchange:this.handleSlotchange.bind(this),class:"kol-tree-wc"},(0,r.h)("nav",{key:"4656ce07f92edccf78398661ebd2724f1d6520a1",class:"tree","aria-label":this.state._label},(0,r.h)("ul",{key:"1a4ff195a91ffc6675fe58aff031326bb13140bf",class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,r.h)("slot",{key:"08e783235759ace2fee71f95ee5268ab531c7556"}))))}static isTreeItem(e){return(null==e?void 0:e.tagName)==="kol-tree-item".toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){this.getTopLevelTreeItems().forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e;return(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(n.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){return this.getTopLevelTreeItems().reduce(((e,t)=>{const l=t.querySelectorAll("kol-tree-item");return[...e,t,...l]}),[])}getOpenTreeItemElements(){return s(this,null,(function*(){if(!this.treeItemElements)return;const e=t=>s(this,null,(function*(){return!n.isTreeItem(t.parentElement)||(yield t.parentElement.isOpen())&&(yield e(t.parentElement))}));return(yield Promise.all(this.treeItemElements.map((t=>s(this,null,(function*(){return{value:t,include:yield e(t)}})))))).filter((e=>e.include)).map((e=>e.value))}))}handleKeyDown(e){return s(this,null,(function*(){var t,l,r,i;const s=yield this.getOpenTreeItemElements(),n=null===(t=document.activeElement)||void 0===t?void 0:t.closest("kol-tree-item");if(!s||!n)return;const a=null==s?void 0:s.findIndex((e=>e===n));switch(e.key){case"ArrowDown":yield null===(l=s[a+1])||void 0===l?void 0:l.focusLink(),e.preventDefault();break;case"ArrowUp":yield null===(r=s[a-1])||void 0===r?void 0:r.focusLink(),e.preventDefault();break;case"ArrowRight":yield n.expand(),e.preventDefault();break;case"ArrowLeft":yield n.collapse(),e.preventDefault();break;case"*":{const e=null===(i=n.parentElement)||void 0===i?void 0:i.querySelectorAll("kol-tree-item");null==e||e.forEach((e=>{e.expand()}));break}}}))}handleFocusOut(e){return s(this,null,(function*(){e.relatedTarget&&!e.relatedTarget.closest("kol-tree")&&(yield this.ensureActiveItemVisibility())}))}ensureActiveItemVisibility(){return s(this,null,(function*(){const e=t=>{n.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e;const t=(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(n.isTreeItem);for(const e of t){if(e._active)return e;const t=e.querySelector('kol-tree-item[_active="true"]');if(t&&t._active)return t}})();t&&e(t)}))}get host(){return(0,r.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}}}]);