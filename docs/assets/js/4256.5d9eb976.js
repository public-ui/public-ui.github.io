"use strict"; exports.id = 4256; exports.ids = [4256]; exports.modules = { /***/ 44256: /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => { __webpack_require__.r(__webpack_exports__); /* harmony export */ __webpack_require__.d(__webpack_exports__, { /* harmony export */ kol_tree_wc: () => (/* binding */ KolTreeWc) /* harmony export */ }); /* harmony import */ var _index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91388); /* harmony import */ var _index_de9d4ee0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32924); /*! * KoliBri - The accessible HTML-Standard */ const TREE_ITEM_TAG_NAME="kol-tree-item",KolTreeWc=class{constructor(e){(0,_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,e),this.state={_label:""},this._label=void 0}validateLabel(e){(0,_index_de9d4ee0_js__WEBPACK_IMPORTED_MODULE_1__.v)(this,e)}render(){return (0,_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.H,{key:"e60c77ae0b5a99ffcfe98db836cb9ea1cd4c4149",onSlotchange:this.handleSlotchange.bind(this)},(0,_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.h)("nav",{key:"f192d670742c7e304b5f8b9571e16e4cce60d37b",class:"tree","aria-label":this.state._label},(0,_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.h)("ul",{key:"0099533c1bfd1691818656555c92b2caf39770ae",class:"treeview-navigation",role:"tree","aria-label":this.state._label},(0,_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot",{key:"e05b65f5929d98f0cab0c76f08622c5b312986bc"}))))}static isTreeItem(e){return(null==e?void 0:e.tagName)==="kol-tree-item".toUpperCase()}componentWillLoad(){this.validateLabel(this._label),this.handleTreeChange(),this.observeChildListMutations()}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}observeChildListMutations(){this.observer=new MutationObserver(this.handleTreeChange.bind(this)),this.observeTopLevelItems()}handleSlotchange(){this.observeTopLevelItems(),this.handleTreeChange()}observeTopLevelItems(){this.getTopLevelTreeItems().forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.observe(e,{childList:!0,subtree:!0})}))}getTopLevelTreeItems(){var e;return(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(KolTreeWc.isTreeItem)}handleTreeChange(){this.treeItemElements=this.getTreeItemElements(),this.ensureActiveItemVisibility()}getTreeItemElements(){return this.getTopLevelTreeItems().reduce(((e,t)=>{const a=t.querySelectorAll("kol-tree-item");return[...e,t,...a]}),[])}async getOpenTreeItemElements(){if(!this.treeItemElements)return;const e=async t=>!KolTreeWc.isTreeItem(t.parentElement)||await t.parentElement.isOpen()&&await e(t.parentElement);return(await Promise.all(this.treeItemElements.map((async t=>({value:t,include:await e(t)}))))).filter((e=>e.include)).map((e=>e.value))}async handleKeyDown(e){var t,a,r,s;const l=await this.getOpenTreeItemElements(),i=null===(t=document.activeElement)||void 0===t?void 0:t.closest("kol-tree-item");if(!l||!i)return;const n=null==l?void 0:l.findIndex((e=>e===i));switch(e.key){case"ArrowDown":await(null===(a=l[n+1])||void 0===a?void 0:a.focusLink()),e.preventDefault();break;case"ArrowUp":await(null===(r=l[n-1])||void 0===r?void 0:r.focusLink()),e.preventDefault();break;case"ArrowRight":await i.expand(),e.preventDefault();break;case"ArrowLeft":await i.collapse(),e.preventDefault();break;case"*":{const e=null===(s=i.parentElement)||void 0===s?void 0:s.querySelectorAll("kol-tree-item");null==e||e.forEach((e=>{e.expand()}));break}}}async handleFocusOut(e){e.relatedTarget&&!e.relatedTarget.closest("kol-tree")&&await this.ensureActiveItemVisibility()}async ensureActiveItemVisibility(){const e=t=>{KolTreeWc.isTreeItem(t.parentElement)&&(t.parentElement.expand(),e(t.parentElement))},t=(()=>{var e;const t=(null===(e=this.host.querySelector("slot"))||void 0===e?void 0:e.assignedNodes()).filter(KolTreeWc.isTreeItem);for(const e of t){if(e._active)return e;const t=e.querySelector('kol-tree-item[_active="true"]');if(t&&t._active)return t}})();t&&e(t)}get host(){return (0,_index_62e5924b_js__WEBPACK_IMPORTED_MODULE_0__.g)(this)}static get watchers(){return{_label:["validateLabel"]}}}; /***/ }) }; ;