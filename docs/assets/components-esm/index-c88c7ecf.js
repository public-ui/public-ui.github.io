/*!
 * KoliBri - The accessible HTML-Standard
 */
var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},loglevel={exports:{}};!function(e){var t,o;t=commonjsGlobal,o=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function l(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(t,o){for(var l=0;l<n.length;l++){var s=n[l];this[s]=l<t?e:this.methodFactory(s,t,o)}this.log=this.debug}function r(e,o,n){return function(){typeof console!==t&&(i.call(this,o,n),this[e].apply(this,arguments))}}function a(n,i,a){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&o?s:void 0!==console[n]?l(console,n):void 0!==console.log?l(console,"log"):e)}(n)||r.apply(this,arguments)}function c(e,o,l){var s,r=this;o=null==o?"WARN":o;var c="loglevel";function y(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=o.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(o.slice(n))[1])}catch(e){}return void 0===r.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),r.name=e,r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=l||a,r.getLevel=function(){return s},r.setLevel=function(o,l){if("string"==typeof o&&void 0!==r.levels[o.toUpperCase()]&&(o=r.levels[o.toUpperCase()]),!("number"==typeof o&&o>=0&&o<=r.levels.SILENT))throw"log.setLevel() called with invalid level: "+o;if(s=o,!1!==l&&function(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+o+";"}catch(e){}}}(o),i.call(r,o,e),typeof console===t&&o<r.levels.SILENT)return"No console available for logging"},r.setDefaultLevel=function(e){o=e,y()||r.setLevel(e,!1)},r.resetLevel=function(){r.setLevel(o,!1),function(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},r.enableAll=function(e){r.setLevel(r.levels.TRACE,e)},r.disableAll=function(e){r.setLevel(r.levels.SILENT,e)};var f=y();null==f&&(f=o),r.setLevel(f,!1)}var y=new c,f={};y.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new c(e,y.getLevel(),y.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return y.noConflict=function(){return typeof window!==t&&window.log===y&&(window.log=h),y},y.getLoggers=function(){return f},y.default=y,y},e.exports?e.exports=o():t.log=o()}(loglevel);const y=loglevel.exports,o="object"==typeof window?window:"object"==typeof global?global:"object"==typeof self?self:{};let p=!0,T=!1;const D=/^[a-z][a-z0-9]{1,}(-[a-z0-9]+)?$/,I=e=>"string"==typeof e&&D.test(e),g=e=>{if(!1===I(e))throw new Error(`[Theming] The theme identifier "${"string"==typeof e?e:""}" (Type: ${typeof e}) is not valid. Please use only follow this pattern: /^[a-z][a-z0-9]{1,}(-[a-z0-9]+)?$/`)},A=(e,t,n,l)=>{(l=l??{}).append=l.append??!1,g(e),!0===p&&!1===T&&(T=!0,y.warn(`[Theming] The theme process is locked. This means that the theme "${e}" should not be patched.\n\n\timport { register } from 'adopted-style-sheets';\n\timport { defineCustomElements } from '...';\n\timport { THEME } from '...';\n\n\tregister(THEME, defineCustomElements)\n\t.then(() => {\n\t\t// run your app or website\n\t})\n\t.catch(console.warn);`)),("object"!=typeof o.A11yUi||null===o.A11yUi)&&(o.A11yUi={}),"object"==typeof o.A11yUi&&null!==o.A11yUi&&("object"!=typeof o.A11yUi.Themes||null===o.A11yUi.Themes)&&(o.A11yUi.Themes={}),"object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Themes&&null!==o.A11yUi.Themes&&("object"!=typeof o.A11yUi.Themes[e]||null===o.A11yUi.Themes[e])&&(o.A11yUi.Themes[e]={}),"object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Themes&&null!==o.A11yUi.Themes&&"object"==typeof o.A11yUi.Themes[e]&&null!==o.A11yUi.Themes[e]&&(l.append&&"string"==typeof o.A11yUi.Themes[e][t]?o.A11yUi.Themes[e][t]+=n:o.A11yUi.Themes[e][t]=n)},b=(e,t,o)=>(g(e),"object"==typeof t&&null!==t&&Object.getOwnPropertyNames(t).forEach((n=>{const l=t[n];"string"==typeof l&&l.length>0&&A(e,n,l,o)})),e),U=e=>{if(e instanceof HTMLElement){if("string"==typeof e.dataset.theme)return e;{let t=e.parentNode;for(;t instanceof ShadowRoot;)t=t.host;return U(t)}}return null},E=(e={})=>"false"!==e.themeEncroachCss&&"true"!==e.themeReset&&{mode:"after"===e.themeEncroachCssMode||"before"===e.themeEncroachCssMode?e.themeEncroachCssMode:"before"},w=()=>"object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Theme&&null!==o.A11yUi.Theme&&"boolean"==typeof o.A11yUi.Theme.cache&&"object"==typeof o.A11yUi.Theme.encroachCss&&null!==o.A11yUi.Theme.encroachCss&&"string"==typeof o.A11yUi.Theme.encroachCss.mode&&"string"==typeof o.A11yUi.Theme.name,z=()=>!("object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Theme&&null!==o.A11yUi.Theme&&"default"===o.A11yUi.Theme.name),S=e=>{if(w())return o.A11yUi.Theme;{const t={cache:!0,encroachCss:E(),loglevel:"silent",name:null},o=U(e);return o instanceof HTMLElement&&(t.cache="false"!==o.dataset.themeCache,t.encroachCss=E(o.dataset),t.loglevel="debug"===o.dataset.themeLoglevel?o.dataset.themeLoglevel:"silent",t.name=o.dataset.theme||null),t}},Y=(e,t)=>({cache:!1!==t.cache,detect:"auto"===t.detect?"auto":"fixed",encroachCss:!1!==t.encroachCss&&("object"!=typeof t.encroachCss||null==t.encroachCss||"after"!==t.encroachCss.mode&&"before"!==t.encroachCss.mode?{mode:"before"}:t.encroachCss),loglevel:"debug"===t.loglevel?t.loglevel:"silent",name:"string"==typeof t.name?t.name:e}),k=(e,t)=>{!1===w()&&z()&&"object"==typeof t&&null!==t&&("fixed"===(t=Y(e,t)).detect?(null===t.name&&"string"==typeof e&&(t.name=e),e===t.name&&(("object"!=typeof o.A11yUi||null===o.A11yUi)&&(o.A11yUi={}),o.A11yUi.Theme=t,y.info(`[Theming] Theme "${e}" was set as default theme.`))):y.warn("[Theming] The presetting of theme options is only relevant by using 'fixed' detection mode."))};let j=!1;const _=(e,t,o={})=>{!1===j&&(j=!0,p=!1),"function"==typeof e?e=new Set([e]):Array.isArray(e)&&(e=new Set(e)),e instanceof Set&&e.forEach((e=>{"function"==typeof e&&1===e.length?k(e(b),{cache:o.theme?.cache,detect:o.theme?.detect,encroachCss:o.theme?.encroachCss,name:o.theme?.name}):y.error("[Theming] Es wurde versucht eine nicht kompatibles Theme zu laden.")})),p=!0,"function"==typeof t?t=new Set([t]):Array.isArray(t)&&(t=new Set(t));const n=[];return t.forEach((e=>{const t=e();t instanceof Promise&&n.push(t)})),Promise.all(n)},c=new Map,C=[],v=new Set,h=new Map,B=/--[^;]+/g,G=/:/;("object"!=typeof o.A11yUi||null===o.A11yUi)&&(o.A11yUi={CSS_STYLE_CACHE:h,HYDRATED_HISTORY:C,STYLING_TASK_QUEUE:c});const K=(e,t)=>{let o=t.match(B);if(Array.isArray(o)){o=o.filter((e=>G.test(e)));const t=document.createElement("style");t.innerHTML=`.${e} {${o.join(";")}}`,document.querySelector("head")?.appendChild(t)}v.add(e)},d=(e,t)=>"object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Themes&&null!==o.A11yUi.Themes&&"object"==typeof o.A11yUi.Themes[e]&&null!==o.A11yUi.Themes[e]&&"string"==typeof o.A11yUi.Themes[e][t]?o.A11yUi.Themes[e][t].replace(/\r?\n/g,""):"",q=e=>{for(const t of Array.from(e.childNodes)){if(!(t instanceof HTMLStyleElement&&"STYLE"===t.tagName))break;e.removeChild(t)}},F=(e,t)=>{try{const o=[];t.forEach((e=>{const t=new CSSStyleSheet;t.replaceSync(e),o.push(t)})),e.adoptedStyleSheets=o}catch{t.reverse().forEach((t=>{const o=document.createElement("style");o.innerHTML=t,e.insertBefore(o,e.firstChild)}))}},Q=(e,t,o)=>{if(!1!==o){const n=[...Array.from(e.childNodes).filter((e=>e instanceof HTMLStyleElement&&"STYLE"===e.tagName))];let l;try{l=[...Array.from(e.adoptedStyleSheets)]}catch{l=[]}"before"===o?.mode?(n.reverse().forEach((e=>t.unshift(e.innerHTML))),l.reverse().forEach((e=>t.unshift(Array.from(e.cssRules).map((e=>e.cssText)).join(""))))):"after"===o?.mode&&(n.forEach((e=>t.push(e.innerHTML))),l.forEach((e=>t.push(Array.from(e.cssRules).map((e=>e.cssText)).join("")))))}},L=(e,t,o)=>{const n=t.name||"default";let l;try{if(null===e.shadowRoot)throw new Error("ShadowRoot is null");l=e.shadowRoot}catch{l=e}if(h.get(n)?.has(e.tagName))M(e,l,h.get(n)?.get(e.tagName),o);else{const s=d(n,"PROPERTIES"),i=d(n,"GLOBAL"),r=d(n,e.tagName);!1===v.has(n)&&K(n,i);const a=[s,i,r];Q(l,a,t.encroachCss),"debug"===t.loglevel&&console.log(e.tagName,a),!0===t.cache&&(!1===h.has(n)&&h.set(n,new Map),h.get(n)?.set(e.tagName,a)),M(e,l,a,o)}},M=(e,t,o,n)=>{q(t),F(t,o),e.style.display=n},$=e=>{"debug"===e.loglevel&&C.push({timestamp:Date.now(),numberOfTasks:c.size})},J=(e,t)=>{c.set(e,{styleDisplay:e.style.display?`${e.style.display}`:null,themeDetails:t})},V=(e,t)=>{J(e,t),$(t)},W=e=>{c.delete(e)},O=(e,t)=>{W(e),$(t)},R=e=>{const t=setTimeout((()=>{if(clearTimeout(t),c.has(e)&&e.classList.contains("hydrated")){const{styleDisplay:t,themeDetails:o}=c.get(e);L(e,o,t),O(e,o)}else R(e)}),25)},X=e=>{for(const t of e)if(c.has(t.target)&&t.target.classList.contains("hydrated")){const{styleDisplay:e,themeDetails:o}=c.get(t.target);L(t.target,o,e),O(t.target,o)}},Z={attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1};let f;try{f=new MutationObserver(X)}catch{f=null}const ee=(e,t)=>{V(e,t),f?f.observe(e,Z):R(e),e.style.display="none"};export{A,S,_,b,ee as e};