{"version":3,"names":["mapCustomIcon","state","alignment","icon","isObject","isString","mapIconProp2State","iconAlign","right","left","top","bottom","beforePatchIcon","component","_a","nextState","has","_b","get","_c","_iconAlign","_d","set","_e","lastIconAlign","_f","undefined","_g","_icon","isIcon","value","style","isStyle","validateIcon","objectObjectHandler","parseJson","e","watchValidator","Set","hooks","beforePatch","nextValue","required","watchIconAlign"],"sources":["src/types/props/icon.ts"],"sourcesContent":["import { Generic } from '@a11y-ui/core';\r\n\r\nimport { objectObjectHandler, parseJson, watchValidator } from '../../utils/prop.validators';\r\nimport { isObject, isString, isStyle } from '../../utils/validator';\r\nimport { ButtonStates } from '../button-link';\r\nimport { Stringified } from '../common';\r\nimport { AnyIconFontClass, KoliBriCustomIcon, KoliBriIconProp, KoliBriIconState } from '../icon';\r\nimport { Align } from './align';\r\n\r\n/* types */\r\n/** de\r\n * Setzt den unbestimmten Zustand auf der Checkbox, hat keine Auswirkung auf _checked.\r\n */\r\n/** en\r\n * Puts the checkbox in the indeterminate state, does not change the value of _checked.\r\n */\r\nexport type PropIcon = {\r\n\ticon: Stringified<KoliBriIconProp>;\r\n};\r\n\r\n/* validator */\r\n\r\nconst mapCustomIcon = (state: KoliBriIconState, alignment: Align, icon?: AnyIconFontClass | KoliBriCustomIcon) => {\r\n\tif (isObject(icon)) {\r\n\t\tstate[alignment] = icon as KoliBriCustomIcon;\r\n\t} else if (isString(icon, 1)) {\r\n\t\tstate[alignment] = {\r\n\t\t\ticon: icon as AnyIconFontClass,\r\n\t\t};\r\n\t}\r\n};\r\n\r\nexport const mapIconProp2State = (icon: KoliBriIconProp, iconAlign?: Align): KoliBriIconState => {\r\n\tlet state: KoliBriIconState = {};\r\n\tif (isString(icon, 1)) {\r\n\t\tswitch (iconAlign) {\r\n\t\t\tcase 'right':\r\n\t\t\t\tstate = {\r\n\t\t\t\t\tright: {\r\n\t\t\t\t\t\ticon: icon as AnyIconFontClass,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tstate = {\r\n\t\t\t\t\tleft: {\r\n\t\t\t\t\t\ticon: icon as AnyIconFontClass,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t}\r\n\t} else if (typeof icon === 'object' && icon !== null) {\r\n\t\tmapCustomIcon(state, 'top', icon.top);\r\n\t\tmapCustomIcon(state, 'right', icon.right);\r\n\t\tmapCustomIcon(state, 'bottom', icon.bottom);\r\n\t\tmapCustomIcon(state, 'left', icon.left);\r\n\t}\r\n\treturn state;\r\n};\r\n\r\nconst beforePatchIcon = (component: Generic.Element.Component): void => {\r\n\tif (component.nextState?.has('_icon')) {\r\n\t\tconst icon = component.nextState?.get('_icon') as KoliBriIconProp;\r\n\t\tconst iconAlign = (component.nextState?.get('_iconAlign') as Align) || (component.state as ButtonStates)._iconAlign;\r\n\t\tcomponent.nextState?.set('_icon', mapIconProp2State(icon, iconAlign));\r\n\t} else if (component.nextState?.has('_iconAlign')) {\r\n\t\tconst lastIconAlign = (component.state as ButtonStates)._iconAlign as Align;\r\n\t\tcomponent.nextState?.set('_icon', {\r\n\t\t\t[lastIconAlign]: undefined,\r\n\t\t\t[component.nextState?.get('_iconAlign') as Align]: (component.state as ButtonStates)._icon[lastIconAlign],\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const isIcon = (value?: unknown): boolean =>\r\n\ttypeof value === 'object' &&\r\n\tvalue !== null &&\r\n\t(typeof (value as KoliBriCustomIcon).style === 'undefined' || isStyle((value as KoliBriCustomIcon).style)) &&\r\n\tisString((value as KoliBriCustomIcon).icon, 1);\r\n\r\nexport const validateIcon = (component: Generic.Element.Component, value?: KoliBriIconProp): void => {\r\n\tobjectObjectHandler(value, () => {\r\n\t\ttry {\r\n\t\t\tvalue = parseJson<KoliBriIconProp>(value as string);\r\n\t\t} catch (e) {\r\n\t\t\t// value behält den ursprünglichen Wert\r\n\t\t}\r\n\t\twatchValidator(\r\n\t\t\tcomponent,\r\n\t\t\t'_icon',\r\n\t\t\t(value): boolean => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tvalue === null ||\r\n\t\t\t\t\tisString(value, 1) ||\r\n\t\t\t\t\t(typeof value === 'object' &&\r\n\t\t\t\t\t\tvalue !== null &&\r\n\t\t\t\t\t\t(isString(value.left, 1) ||\r\n\t\t\t\t\t\t\tisIcon(value.left) ||\r\n\t\t\t\t\t\t\tisString(value.right, 1) ||\r\n\t\t\t\t\t\t\tisIcon(value.right) ||\r\n\t\t\t\t\t\t\tisString(value.top, 1) ||\r\n\t\t\t\t\t\t\tisIcon(value.top) ||\r\n\t\t\t\t\t\t\tisString(value.bottom, 1) ||\r\n\t\t\t\t\t\t\tisIcon(value.bottom)))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tnew Set(['KoliBriIcon']),\r\n\t\t\tvalue,\r\n\t\t\t{\r\n\t\t\t\thooks: {\r\n\t\t\t\t\tbeforePatch: (nextValue: unknown, nextState: Map<string, unknown>) => {\r\n\t\t\t\t\t\tif (nextValue === null) {\r\n\t\t\t\t\t\t\tnextState.set('_icon', {});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbeforePatchIcon(component);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trequired: true,\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n};\r\n\r\nexport const watchIconAlign = (component: Generic.Element.Component, value?: Align): void => {\r\n\twatchValidator(component, '_iconAlign', (value) => value === 'left' || value === 'right', new Set(['Alignment {left, right, top, bottom}']), value, {\r\n\t\thooks: {\r\n\t\t\tbeforePatch: () => {\r\n\t\t\t\tbeforePatchIcon(component);\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n};\r\n"],"mappings":";;;iHAsBA,MAAMA,EAAgB,CAACC,EAAyBC,EAAkBC,KACjE,GAAIC,EAASD,GAAO,CACnBF,EAAMC,GAAaC,C,MACb,GAAIE,EAASF,EAAM,GAAI,CAC7BF,EAAMC,GAAa,CAClBC,KAAMA,E,GAKF,MAAMG,EAAoB,CAACH,EAAuBI,KACxD,IAAIN,EAA0B,GAC9B,GAAII,EAASF,EAAM,GAAI,CACtB,OAAQI,GACP,IAAK,QACJN,EAAQ,CACPO,MAAO,CACNL,KAAMA,IAGR,MACD,QACCF,EAAQ,CACPQ,KAAM,CACLN,KAAMA,I,MAIJ,UAAWA,IAAS,UAAYA,IAAS,KAAM,CACrDH,EAAcC,EAAO,MAAOE,EAAKO,KACjCV,EAAcC,EAAO,QAASE,EAAKK,OACnCR,EAAcC,EAAO,SAAUE,EAAKQ,QACpCX,EAAcC,EAAO,OAAQE,EAAKM,K,CAEnC,OAAOR,CAAK,EAGb,MAAMW,EAAmBC,I,kBACxB,IAAIC,EAAAD,EAAUE,aAAS,MAAAD,SAAA,SAAAA,EAAEE,IAAI,SAAU,CACtC,MAAMb,GAAOc,EAAAJ,EAAUE,aAAS,MAAAE,SAAA,SAAAA,EAAEC,IAAI,SACtC,MAAMX,IAAaY,EAAAN,EAAUE,aAAS,MAAAI,SAAA,SAAAA,EAAED,IAAI,gBAA4BL,EAAUZ,MAAuBmB,YACzGC,EAAAR,EAAUE,aAAS,MAAAM,SAAA,SAAAA,EAAEC,IAAI,QAAShB,EAAkBH,EAAMI,G,MACpD,IAAIgB,EAAAV,EAAUE,aAAS,MAAAQ,SAAA,SAAAA,EAAEP,IAAI,cAAe,CAClD,MAAMQ,EAAiBX,EAAUZ,MAAuBmB,YACxDK,EAAAZ,EAAUE,aAAS,MAAAU,SAAA,SAAAA,EAAEH,IAAI,QAAS,CACjCE,CAACA,GAAgBE,UACjB,EAACC,EAAAd,EAAUE,aAAS,MAAAY,SAAA,SAAAA,EAAET,IAAI,eAA0BL,EAAUZ,MAAuB2B,MAAMJ,I,SAKjFK,EAAUC,UACfA,IAAU,UACjBA,IAAU,cACDA,EAA4BC,QAAU,aAAeC,EAASF,EAA4BC,SACnG1B,EAAUyB,EAA4B3B,KAAM,G,MAEhC8B,EAAe,CAACpB,EAAsCiB,KAClEI,EAAoBJ,GAAO,KAC1B,IACCA,EAAQK,EAA2BL,E,CAClC,MAAOM,G,CAGTC,EACCxB,EACA,SACCiB,GAECA,IAAU,MACVzB,EAASyB,EAAO,WACRA,IAAU,UACjBA,IAAU,OACTzB,EAASyB,EAAMrB,KAAM,IACrBoB,EAAOC,EAAMrB,OACbJ,EAASyB,EAAMtB,MAAO,IACtBqB,EAAOC,EAAMtB,QACbH,EAASyB,EAAMpB,IAAK,IACpBmB,EAAOC,EAAMpB,MACbL,EAASyB,EAAMnB,OAAQ,IACvBkB,EAAOC,EAAMnB,UAGjB,IAAI2B,IAAI,CAAC,gBACTR,EACA,CACCS,MAAO,CACNC,YAAa,CAACC,EAAoB1B,KACjC,GAAI0B,IAAc,KAAM,CACvB1B,EAAUO,IAAI,QAAS,G,CAExBV,EAAgBC,EAAU,GAG5B6B,SAAU,MAEX,GACA,E,MAGUC,EAAiB,CAAC9B,EAAsCiB,KACpEO,EAAexB,EAAW,cAAeiB,GAAUA,IAAU,QAAUA,IAAU,SAAS,IAAIQ,IAAI,CAAC,yCAA0CR,EAAO,CACnJS,MAAO,CACNC,YAAa,KACZ5B,EAAgBC,EAAU,IAG3B,S"}