{"version":3,"names":["KoliBriProgressVariantEnum","defaultStyleCss","VALID_VARIANTS","Object","keys","createProgressSVG","state","fullCircle","textPositionTop","textPositionBottom","labelY","valueY","_label","_variant","h","class","width","viewBox","xmlns","cx","cy","r","fill","stroke","Math","round","_value","_max","x","y","_unit","style","display","gap","height","rx","KolProcess","_liveValue","render","Host","this","max","value","hidden","validateLabel","validateMax","watchNumber","required","validateType","validateVariant","validateUnit","watchString","validateValue","watchValidator","includes","Set","componentWillLoad","_type","interval","setInterval","assign","disconnectedCallback","clearInterval"],"sources":["src/types/progress.ts","src/components/progress/style.css?tag=kol-progress&mode=default&encapsulation=shadow","src/components/progress/component.tsx"],"sourcesContent":["export enum KoliBriProgressVariantEnum {\r\n\t'bar' = 'bar',\r\n\t'cycle' = 'cycle',\r\n\t'cycle-value-label' = 'cycle-value-label',\r\n\t'cycle-label-value' = 'cycle-label-value',\r\n}\r\n\r\nexport type KoliBriProgressVariantType = `${KoliBriProgressVariantEnum}`;\r\n","@import url(../style.css);\nprogress {\n\tdisplay: block;\n\theight: 0;\n\toverflow: hidden;\n\twidth: 0;\n}\n.bar .border {\n\tfill: transparent;\n\tstroke: black;\n}\n.bar .background {\n\tfill: lightgray;\n\tstroke: white;\n}\n.bar .progress {\n\tfill: #0075ff;\n\tstroke: transparent;\n\ttransition: 250ms ease-in-out 50ms;\n}\n.cycle .background {\n\tfill: transparent;\n\tstroke: lightgray;\n}\n.cycle .border {\n\tfill: transparent;\n\tstroke: black;\n}\n.cycle .whitespace {\n\tfill: transparent;\n\tstroke: white;\n}\n.cycle .progress {\n\tfill: transparent;\n\tstroke: #0075ff;\n\ttransform-origin: 50% 50%;\n\ttransform: rotate(-90deg);\n\ttransition: 250ms ease-in-out 50ms;\n}\n/* https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion */\n@media (prefers-reduced-motion) {\n\t.progress {\n\t\ttransition-duration: 0s;\n\t\ttransition-delay: 0s;\n\t}\n}\n","import { Component, h, Host, JSX, Prop, State, Watch } from '@stencil/core';\r\n\r\nimport { KoliBriProgressVariantEnum, KoliBriProgressVariantType } from '../../types/progress';\r\nimport { LabelPropType, validateLabel } from '../../types/props/label';\r\nimport { watchNumber, watchString, watchValidator } from '../../utils/prop.validators';\r\nimport { KoliBriProgressAPI, KoliBriProgressStates } from './types';\r\n\r\nconst VALID_VARIANTS = Object.keys(KoliBriProgressVariantEnum);\r\n\r\n// https://css-tricks.com/html5-progress-element/\r\nconst createProgressSVG = (state: KoliBriProgressStates): JSX.Element => {\r\n\tconst fullCircle = 342;\r\n\tconst textPositionTop = '43%';\r\n\tconst textPositionBottom = '57%';\r\n\r\n\tlet labelY = textPositionTop;\r\n\tlet valueY = state._label ? textPositionBottom : '50%';\r\n\tswitch (state._variant) {\r\n\t\tcase 'cycle-value-label':\r\n\t\t\tif (state._label) {\r\n\t\t\t\tlabelY = textPositionBottom;\r\n\t\t\t\tvalueY = textPositionTop;\r\n\t\t\t}\r\n\t\t// eslint-disable-next-line no-fallthrough\r\n\t\tcase 'cycle':\r\n\t\tcase 'cycle-label-value':\r\n\t\t\treturn (\r\n\t\t\t\t<svg class=\"cycle\" width=\"100\" viewBox=\"0 0 120 120\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t<circle class=\"background\" cx=\"60\" cy=\"60\" r=\"54.5\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"8\"></circle>\r\n\t\t\t\t\t<circle class=\"whitespace\" cx=\"60\" cy=\"60\" r=\"59\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"3\"></circle>\r\n\t\t\t\t\t<circle class=\"border\" cx=\"60\" cy=\"60\" r=\"59\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"1\"></circle>\r\n\t\t\t\t\t<circle class=\"whitespace\" cx=\"60\" cy=\"60\" r=\"51\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"1\"></circle>\r\n\t\t\t\t\t<circle class=\"border\" cx=\"60\" cy=\"60\" r=\"50\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"1\"></circle>\r\n\t\t\t\t\t<circle\r\n\t\t\t\t\t\tclass=\"progress\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\tstroke-dasharray={`${Math.round((state._value / state._max) * fullCircle)}px ${fullCircle}px`}\r\n\t\t\t\t\t\tstroke-width=\"6\"\r\n\t\t\t\t\t\tcx=\"60\"\r\n\t\t\t\t\t\tcy=\"60\"\r\n\t\t\t\t\t\tr=\"54.5\"\r\n\t\t\t\t\t></circle>\r\n\t\t\t\t\t{state._label && (\r\n\t\t\t\t\t\t<text aria-hidden=\"true\" x=\"50%\" y={labelY} text-anchor=\"middle\" fill=\"currentColor\">\r\n\t\t\t\t\t\t\t{state._label}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<text aria-hidden=\"true\" x=\"50%\" y={valueY} text-anchor=\"middle\" fill=\"currentColor\">\r\n\t\t\t\t\t\t{state._value}\r\n\t\t\t\t\t\t{state._unit}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<div class=\"bar\">\r\n\t\t\t\t\t{state._label && <div>{state._label}</div>}\r\n\t\t\t\t\t<div style={{ display: 'flex', gap: '0.3em' }}>\r\n\t\t\t\t\t\t<svg width=\"100\" viewBox=\"0 0 102 8\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t\t\t<rect class=\"background\" x=\"1\" y=\"1\" height=\"10\" rx=\"5\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"3\" width=\"100\"></rect>\r\n\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\tclass=\"progress\"\r\n\t\t\t\t\t\t\t\tx=\"2.5\"\r\n\t\t\t\t\t\t\t\ty=\"2.5\"\r\n\t\t\t\t\t\t\t\theight=\"7\"\r\n\t\t\t\t\t\t\t\trx=\"3.5\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tstroke-width=\"3\"\r\n\t\t\t\t\t\t\t\twidth={95 * (state._value / state._max)}\r\n\t\t\t\t\t\t\t></rect>\r\n\t\t\t\t\t\t\t<rect class=\"border\" x=\"1\" y=\"1\" height=\"10\" rx=\"5\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"1\" width=\"100\"></rect>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<text aria-hidden=\"true\" text-anchor=\"middle\" dominant-baseline=\"central\" fill=\"currentColor\">\r\n\t\t\t\t\t\t\t{state._value}\r\n\t\t\t\t\t\t\t{state._unit}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n};\r\n\r\n@Component({\r\n\ttag: 'kol-progress',\r\n\tstyleUrls: {\r\n\t\tdefault: './style.css',\r\n\t},\r\n\tshadow: true,\r\n})\r\nexport class KolProcess implements KoliBriProgressAPI {\r\n\tprivate interval?: NodeJS.Timer;\r\n\r\n\t// https://dequeuniversity.com/library/aria/progress-bar-bounded\r\n\tpublic render(): JSX.Element {\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t{createProgressSVG(this.state)}\r\n\t\t\t\t<progress aria-busy={this.state._value < this.state._max ? 'true' : 'false'} max={this.state._max} value={this.state._value}></progress>\r\n\t\t\t\t<span aria-live=\"polite\" aria-relevant=\"removals text\" hidden>\r\n\t\t\t\t\t{this.state._liveValue} von {this.state._max} {this.state._unit}\r\n\t\t\t\t</span>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Setzt die sichtbare oder semantische Beschriftung der Komponente (z.B. Aria-Label, Label, Headline, Caption, Summary usw.).\r\n\t */\r\n\t@Prop() public _label?: LabelPropType;\r\n\r\n\t/**\r\n\t * Gibt an, bei welchem Wert die Fortschrittsanzeige abgeschlossen ist.\r\n\t */\r\n\t@Prop() public _max!: number;\r\n\r\n\t/**\r\n\t * Deprecated: Gibt an, ob der Prozess als Balken oder Kreis dargestellt wird.\r\n\t * @deprecated will be removed in v2, use _variant\r\n\t */\r\n\t@Prop() public _type?: KoliBriProgressVariantType;\r\n\r\n\t/**\r\n\t * Setzt die Einheit der Fortschrittswerte. (wird nicht angezeigt)\r\n\t */\r\n\t@Prop() public _unit?: string = '%';\r\n\r\n\t/**\r\n\t * Gibt an, wie weit die Anzeige fortgeschritten ist.\r\n\t */\r\n\t@Prop() public _value!: number;\r\n\r\n\t/**\r\n\t * Gibt an, welche Variante der Darstellung genutzt werden soll.\r\n\t */\r\n\t@Prop() public _variant?: KoliBriProgressVariantType;\r\n\r\n\t@State() public state: KoliBriProgressStates = {\r\n\t\t_max: 100,\r\n\t\t_unit: '%',\r\n\t\t_value: 0,\r\n\t\t_variant: 'bar',\r\n\t\t_liveValue: 0,\r\n\t};\r\n\r\n\t@Watch('_label')\r\n\tpublic validateLabel(value?: LabelPropType): void {\r\n\t\tvalidateLabel(this, value);\r\n\t}\r\n\r\n\t@Watch('_max')\r\n\tpublic validateMax(value?: number): void {\r\n\t\tif (typeof value !== 'number') {\r\n\t\t\tvalue = 100;\r\n\t\t}\r\n\t\twatchNumber(this, '_max', value, {\r\n\t\t\trequired: true,\r\n\t\t});\r\n\t}\r\n\r\n\t// @deprecated remove with v2\r\n\t@Watch('_type')\r\n\tpublic validateType(value?: KoliBriProgressVariantType): void {\r\n\t\tthis.validateVariant(value);\r\n\t}\r\n\r\n\t@Watch('_unit')\r\n\tpublic validateUnit(value?: string): void {\r\n\t\twatchString(this, '_unit', value);\r\n\t}\r\n\r\n\t@Watch('_value')\r\n\tpublic validateValue(value?: number): void {\r\n\t\tif (typeof value !== 'number') {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\twatchNumber(this, '_value', value, {\r\n\t\t\t// max: this._max, TODO as Function\r\n\t\t\trequired: true,\r\n\t\t});\r\n\t}\r\n\r\n\t@Watch('_variant')\r\n\tpublic validateVariant(value?: KoliBriProgressVariantType): void {\r\n\t\twatchValidator(this, '_variant', (value) => typeof value === 'string' && VALID_VARIANTS.includes(value), new Set(VALID_VARIANTS), value);\r\n\t}\r\n\r\n\tpublic componentWillLoad(): void {\r\n\t\tthis.validateLabel(this._label);\r\n\t\tthis.validateMax(this._max);\r\n\t\tthis.validateUnit(this._unit);\r\n\t\tthis.validateValue(this._value);\r\n\t\tthis.validateVariant(this._variant || this._type);\r\n\r\n\t\tthis.interval = setInterval(() => {\r\n\t\t\tif (this.state._liveValue !== this.state._value) {\r\n\t\t\t\tthis.state = {\r\n\t\t\t\t\t...this.state,\r\n\t\t\t\t\t_liveValue: this.state._value,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}, 5000);\r\n\t}\r\n\r\n\tpublic disconnectedCallback(): void {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n}\r\n"],"mappings":"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"}