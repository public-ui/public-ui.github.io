{"version":3,"names":["validateOpen","component","value","watchBoolean","defaultStyleCss","featureHint","KolAccordion","this","nonce","contentElement","contentWrapperElement","contentObserver","transition","catchContentElement","element","catchContentWrapperElement","onClick","event","_open","resizeWrapper","setTimeout","_a","state","_on","_heading","_level","list","content","wrapper","observer","style","display","height","clientHeight","observe","addEventListener","overflow","once","unobserve","render","h","Host","class","accordion","open","close","_label","_ariaControls","_ariaExpanded","_icon","name","ref","undefined","id","validateHeading","watchString","required","validateLevel","watchHeadingLevel","validateOn","setState","componentWillLoad","processEnv","ResizeObserver","bind"],"sources":["src/types/props/open.ts","src/components/accordion/style.css?tag=kol-accordion&mode=default&encapsulation=shadow","src/components/accordion/component.tsx"],"sourcesContent":["import { Generic } from '@a11y-ui/core';\r\n\r\nimport { watchBoolean } from '../../utils/prop.validators';\r\n\r\n/* types */\r\n/** de\r\n * Klappt das Element auf sofern gesetzt (oder true) und klappt es zu sofern nicht gesetzt (oder false).\r\n */\r\n/** en\r\n * If set (to true) opens/expands the element, closes if not set (or set to false).\r\n */\r\nexport type PropOpen = {\r\n\topen: boolean;\r\n};\r\n\r\n/* validator */\r\nexport const validateOpen = (component: Generic.Element.Component, value?: boolean): void => {\r\n\twatchBoolean(component, '_open', value);\r\n};\r\n","@import url(../style.css);\n@import url(../host-display-block.css);\n/*\n * Inside a button the label text ist always centered.\n * So we need text align left.\n */\n.accordion kol-heading-wc kol-button-wc button kol-span-wc {\n\tjustify-items: start;\n}\n.content {\n\tinset: 0 0 auto 0;\n\twidth: 100%;\n}\n.transition {\n\ttransition: height 0.3s ease-in-out;\n}\n/* https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion */\n@media (prefers-reduced-motion) {\n\t.transition {\n\t\ttransition-duration: 0s;\n\t}\n}\n","// https://codepen.io/mbxtr/pen/OJPOYg?html-preprocessor=haml\r\n\r\nimport { Component, h, Host, JSX, Prop, State, Watch } from '@stencil/core';\r\n\r\nimport { HeadingLevel } from '../../types/heading-level';\r\nimport { validateOpen } from '../../types/props/open';\r\nimport { featureHint } from '../../utils/a11y.tipps';\r\nimport { nonce } from '../../utils/dev.utils';\r\nimport { setState, watchString } from '../../utils/prop.validators';\r\nimport { processEnv } from '../../utils/reuse';\r\nimport { watchHeadingLevel } from '../heading/validation';\r\nimport { API, KoliBriAccordionCallbacks, States } from './types';\r\n\r\nfeatureHint(`[KolAccordion] Anfrage nach einer KolAccordionGroup bei dem immer nur ein Accordion geöffnet ist.\r\n\r\n- onClick auf der KolAccordion anwenden\r\n- Click-Event prüft den _open-Status der Accordions\r\n- Logik Öffnet und Schließt entsprechend`);\r\nfeatureHint(`[KolAccordion] Tab-Sperre des Inhalts im geschlossenen Zustand.`);\r\n\r\n/**\r\n *\r\n * @slot - Ermöglicht das Einfügen beliebigen HTML's in den Inhaltsbereich des Accordions.\r\n * @slot content - Ermöglicht das Einfügen beliebigen HTML's in den Inhaltsbereich des Accordions.\r\n * @slot header - Deprecated für Version 2: Ermöglicht das Einfügen beliebigen HTML's in den Kopfbereich des Accordions.\r\n */\r\n@Component({\r\n\ttag: 'kol-accordion',\r\n\tstyleUrls: {\r\n\t\tdefault: './style.css',\r\n\t},\r\n\tshadow: true,\r\n})\r\nexport class KolAccordion implements API {\r\n\tprivate readonly nonce = nonce();\r\n\tprivate contentElement: HTMLElement | null = null;\r\n\tprivate contentWrapperElement: HTMLElement | null = null;\r\n\tprivate contentObserver: ResizeObserver | null = null;\r\n\tprivate transition = false;\r\n\r\n\tprivate readonly catchContentElement = (element?: HTMLElement) => {\r\n\t\tif (element) this.contentElement = element;\r\n\t};\r\n\tprivate readonly catchContentWrapperElement = (element?: HTMLElement) => {\r\n\t\tif (element) this.contentWrapperElement = element;\r\n\t};\r\n\r\n\tresizeWrapper(list?: ResizeObserverEntry[]) {\r\n\t\tconst content = this.contentElement;\r\n\t\tconst wrapper = this.contentWrapperElement;\r\n\t\tconst observer = this.contentObserver;\r\n\t\tif (content && wrapper && observer) {\r\n\t\t\tif (this._open) {\r\n\t\t\t\twrapper.style.display = 'block';\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\twrapper.style.height = `${content?.clientHeight ?? 0}px`;\r\n\t\t\t\t});\r\n\t\t\t\tif (!list) observer.observe(content);\r\n\t\t\t\twrapper.addEventListener(\r\n\t\t\t\t\t'transitionend',\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\twrapper.style.overflow = '';\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ once: true }\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\twrapper.style.overflow = 'hidden';\r\n\t\t\t\tobserver.unobserve(content);\r\n\t\t\t\twrapper.style.height = '0';\r\n\t\t\t\tif (this.transition) {\r\n\t\t\t\t\twrapper.addEventListener(\r\n\t\t\t\t\t\t'transitionend',\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\twrapper.style.display = 'none';\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ once: true }\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twrapper.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic render(): JSX.Element {\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass={{\r\n\t\t\t\t\t\taccordion: true,\r\n\t\t\t\t\t\topen: this.state._open === true,\r\n\t\t\t\t\t\tclose: this.state._open !== true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<kol-heading-wc _label=\"\" _level={this.state._level}>\r\n\t\t\t\t\t\t<kol-button-wc\r\n\t\t\t\t\t\t\t// slot=\"expert\"\r\n\t\t\t\t\t\t\t_ariaControls={this.nonce}\r\n\t\t\t\t\t\t\t_ariaExpanded={this.state._open}\r\n\t\t\t\t\t\t\t_icon={this.state._open ? 'codicon codicon-remove' : 'codicon codicon-add'}\r\n\t\t\t\t\t\t\t_label={this.state._heading}\r\n\t\t\t\t\t\t\t_on={{ onClick: this.onClick }}\r\n\t\t\t\t\t\t></kol-button-wc>\r\n\t\t\t\t\t</kol-heading-wc>\r\n\t\t\t\t\t<div class=\"header\">\r\n\t\t\t\t\t\t<slot name=\"header\"></slot>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ref={this.catchContentWrapperElement} class={{ wrapper: true, transition: this.transition }}>\r\n\t\t\t\t\t\t<div ref={this.catchContentElement} aria-hidden={this.state._open === false ? 'true' : undefined} class=\"content\" id={this.nonce}>\r\n\t\t\t\t\t\t\t<slot name=\"content\"></slot> {/* Deprecated for version 2 */}\r\n\t\t\t\t\t\t\t<slot />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Gibt die Beschriftung der Komponente an.\r\n\t */\r\n\t@Prop() public _heading!: string;\r\n\r\n\t/**\r\n\t * Gibt an, welchen H-Level von 1 bis 6 die Überschrift hat. Oder bei 0, ob es keine Überschrift ist und als fett gedruckter Text angezeigt werden soll.\r\n\t */\r\n\t@Prop() public _level?: HeadingLevel = 1;\r\n\r\n\t/**\r\n\t * Gibt die EventCallback-Funktionen an.\r\n\t */\r\n\t@Prop() public _on?: KoliBriAccordionCallbacks;\r\n\r\n\t/**\r\n\t * Gibt an, ob die Komponente entweder geöffnet oder geschlossen ist.\r\n\t */\r\n\t@Prop({ mutable: true, reflect: true }) public _open?: boolean = false;\r\n\r\n\t@State() public state: States = {\r\n\t\t_heading: '…', // ⚠ required\r\n\t\t_level: 1,\r\n\t};\r\n\r\n\t@Watch('_heading')\r\n\tpublic validateHeading(value?: string): void {\r\n\t\twatchString(this, '_heading', value, {\r\n\t\t\trequired: true,\r\n\t\t});\r\n\t}\r\n\r\n\t@Watch('_level')\r\n\tpublic validateLevel(value?: HeadingLevel): void {\r\n\t\twatchHeadingLevel(this, value);\r\n\t}\r\n\r\n\t@Watch('_on')\r\n\tpublic validateOn(value?: KoliBriAccordionCallbacks): void {\r\n\t\tif (typeof value === 'object' && value !== null && typeof value.onClick === 'function') {\r\n\t\t\tsetState(this, '_on', value);\r\n\t\t}\r\n\t}\r\n\r\n\t@Watch('_open')\r\n\tpublic validateOpen(value?: boolean): void {\r\n\t\tvalidateOpen(this, value);\r\n\t}\r\n\r\n\tpublic componentWillLoad(): void {\r\n\t\tthis.validateHeading(this._heading);\r\n\t\tthis.validateLevel(this._level);\r\n\t\tthis.validateOn(this._on);\r\n\t\tthis.validateOpen(this._open);\r\n\t\tif (processEnv !== 'test') this.contentObserver = new ResizeObserver(this.resizeWrapper.bind(this));\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (this.contentObserver && this.contentElement) this.contentObserver.observe(this.contentElement);\r\n\t\t});\r\n\t\t// So it does not transition if it is set to open from the start.\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.transition = true;\r\n\t\t}, 200);\r\n\t}\r\n\r\n\tprivate onClick = (event: Event) => {\r\n\t\tthis._open = !this._open;\r\n\t\tthis.resizeWrapper();\r\n\r\n\t\t/**\r\n\t\t * Der Timeout wird benötigt, damit das Event\r\n\t\t * vom Button- auf das Accordion-Event wechselt.\r\n\t\t * So ist es dem Anwendenden möglich das _open-\r\n\t\t * Attribute abzufragen.\r\n\t\t */\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (typeof this.state._on?.onClick === 'function') {\r\n\t\t\t\tthis.state._on.onClick(event, this._open === true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n"],"mappings":"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"}