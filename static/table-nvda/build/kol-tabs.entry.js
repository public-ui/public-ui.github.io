/*!
 * KoliBri - The accessible HTML-Standard
 */
import{r as t,h as i,H as o,g as e}from"./index-330c31f9.js";import{a as s}from"./i18n-931157b2.js";import{v as n}from"./label-8d64163d.js";import{d as a,f as l,c as r}from"./a11y.tipps-beae7792.js";import{L as d}from"./dev.utils-5b0de6da.js";import{a as h,s as b,e as u,d as c,k as p}from"./prop.validators-0a66a178.js";import"./index-fc511254.js";import"./index-3711603c.js";import"./reuse-c2156413.js";const f=new Set(['"left", "right"']);const g=new Set(['"bottom", "top"']);const v=new Set([...f,...g]);const m=(t,i,o)=>{h(t,i,(t=>t==="bottom"||t==="left"||t==="right"||t==="top"),v,o)};const k=":host{--a11y-min-size:44px;font-size:inherit}*{hyphens:auto;letter-spacing:inherit;word-break:break-word;word-spacing:inherit}[role='button'],button:not([role='link']),kol-input .input{min-height:var(--a11y-min-size);min-width:var(--a11y-min-size)}a,button,h1,h2,h3,h4,h5,h6,input,option,select,textarea{font-family:inherit;font-size:inherit}:is(a,button){background-color:transparent;border:none;margin:0;padding:0;width:100%;}:host{max-width:100%}*{box-sizing:border-box}kol-span-wc{display:grid;place-items:center}kol-span-wc>span{display:flex;place-items:center}a,button{cursor:pointer}button,input,option,select,textarea{font-family:inherit}.icon-only>kol-span-wc>span>span{display:none}:host{display:block}kol-button-group-wc{display:inline-flex;flex-wrap:wrap}kol-button-group-wc button{border-bottom-color:transparent;border-bottom-style:solid;display:block}div.grid,div[role='tabpanel']{height:100%}:host>.tabs-align-right{display:grid;grid-template-columns:1fr auto}:host>.tabs-align-right kol-button-group-wc{display:grid;order:2}:host>.tabs-align-left{display:grid;grid-template-columns:auto 1fr}:host>.tabs-align-left kol-button-group-wc{display:grid;order:0}:host>.tabs-align-bottom{display:grid;grid-template-rows:1fr auto}:host>.tabs-align-bottom kol-button-group-wc{order:2}:host>.tabs-align-bottom kol-button-group-wc>div{display:flex}:host>.tabs-align-bottom>kol-button-group-wc>div>div:first-child{margin:0 1em 0 0}:host>.tabs-align-bottom>kol-button-group-wc>div>div{margin:0 1em}:host>.tabs-align-top{display:grid;grid-template-rows:auto 1fr}:host>.tabs-align-top kol-button-group-wc{order:0}:host>.tabs-align-top kol-button-group-wc>div{display:flex}:host>.tabs-align-top>kol-button-group-wc>div>div:first-child{margin:0 1em 0 0}:host>.tabs-align-top>kol-button-group-wc>div>div{margin:0 1em}:host>div{display:grid}:host>.tabs-align-left kol-button-group-wc,:host>.tabs-align-top kol-button-group-wc{order:0}:host>.tabs-align-bottom kol-button-group-wc,:host>.tabs-align-right kol-button-group-wc{order:1}:host>div.tabs-align-left kol-button-group-wc>div,:host>div.tabs-align-left kol-button-group-wc>div>div,:host>div.tabs-align-right kol-button-group-wc>div,:host>div.tabs-align-right kol-button-group-wc>div>div{display:grid}:host>div.tabs-align-left kol-button-group-wc>div>div kol-button-wc,:host>div.tabs-align-right kol-button-group-wc>div>div kol-button-wc{width:100%}:host>div.tabs-align-bottom kol-button-group-wc div,:host>div.tabs-align-top kol-button-group-wc div{display:flex;flex-wrap:wrap}";const w=class{constructor(i){t(this,i);this.onCreateLabel=`${s("kol-new")} …`;this.showCreateTab=false;this.nextPossibleTabIndex=(t,i,o)=>{if(o>0){if(i+o<t.length){if(t[i+o]._disabled){return this.nextPossibleTabIndex(t,i,o+1)}return i+o}}else if(o<0){if(i+o>=0){if(t[i+o]._disabled){return this.nextPossibleTabIndex(t,i,o-1)}return i+o}}return i};this.onKeyDown=t=>{const i=setTimeout((()=>{clearTimeout(i);let o=null;switch(t.key){case"ArrowRight":o=this.nextPossibleTabIndex(this.state._tabs,this.state._selected,1);break;case"ArrowLeft":o=this.nextPossibleTabIndex(this.state._tabs,this.state._selected,-1);break}if(o!==null){this.onSelect(t,o,true)}}),250)};this.onClickSelect=(t,i)=>{this.onSelect(t,i,true)};this.onMouseDown=t=>{t.stopPropagation()};this.callbacks={onClick:this.onClickSelect,onMouseDown:this.onMouseDown};this.catchTabPanelHost=t=>{this.tabPanelHost=t};this.selectNextNotDisabledTab=(t,i,o=true,e)=>{if(t>i.length-1){t=i.length-1}if(t<0){t=0}if(Array.isArray(i)&&i[t]){if(i[t]._disabled){if(o===true){if(t<i.length-1){return this.selectNextNotDisabledTab(t+1,i,true,e||t)}else{t=e||t;o=false}}if(o===false){if(t>0){return this.selectNextNotDisabledTab(t-1,i,false,e||t)}else{a(`[KolTabs] Alle Tabs sind deaktiviert und somit kann kein Tab angezeigt werden.`)}}}}return t};this.syncSelectedAndTabs=(t,i,o,e)=>{let s;if(e==="_selected"){s=t}else{s=this.state._selected}let n;if(e==="_tabs"){n=t}else{n=this.state._tabs}if(n.length>0){i.set("_selected",this.selectNextNotDisabledTab(s,n))}};this.handleTabPanels=()=>{var t,i,o;if(this.tabPanelHost instanceof HTMLDivElement){for(let e=this.tabPanelHost.children.length;e<this.state._tabs.length;e++){const s=document.createElement("div");s.setAttribute("aria-labelledby",`tab-${e}`);s.setAttribute("id",`tabpanel-${e}`);s.setAttribute("role","tabpanel");s.setAttribute("hidden","");const n=document.createElement("slot");n.setAttribute("name",`tabpanel-slot-${e}`);s.appendChild(n);this.tabPanelHost.appendChild(s);if(((t=this.host)===null||t===void 0?void 0:t.children)instanceof HTMLCollection&&((i=this.host)===null||i===void 0?void 0:i.children[e])){(o=this.host)===null||o===void 0?void 0:o.children[e].setAttribute("slot",`tabpanel-slot-${e}`)}}}};this.onCreate=t=>{var i,o;t.stopPropagation();if(typeof((i=this.state._on)===null||i===void 0?void 0:i.onCreate)==="function"){(o=this.state._on)===null||o===void 0?void 0:o.onCreate(t)}};this._ariaLabel=undefined;this._label=undefined;this._on=undefined;this._selected=0;this._tabs=undefined;this._tabsAlign="top";this.state={_label:"…",_selected:0,_tabs:[],_tabsAlign:"top"}}renderButtonGroup(){return i("kol-button-group-wc",{role:"tablist","aria-label":this.state._label,onKeyDown:this.onKeyDown},this.state._tabs.map(((t,o)=>i("kol-button-wc",{_disabled:t._disabled,_icon:t._icon,_hideLabel:t._hideLabel||t._iconOnly,_label:t._label,_on:this.callbacks,_tabIndex:this.state._selected===o?0:-1,_tooltipAlign:t._tooltipAlign,_variant:this.state._selected===o?"custom":undefined,_customClass:this.state._selected===o?"selected":undefined,_ariaControls:`tabpanel-${o}`,_ariaSelected:this.state._selected===o,_id:`tab-${o}`,_role:"tab",_value:o}))),this.showCreateTab&&i("kol-button-wc",{class:"create-button",_label:this.onCreateLabel,_on:{onClick:this.onCreate}}))}render(){return i(o,null,i("div",{ref:t=>{this.tabPanelsElement=t},class:{[`tabs-align-${this.state._tabsAlign}`]:true}},this.renderButtonGroup(),i("div",{ref:this.catchTabPanelHost})))}validateAriaLabel(t){this.validateLabel(t)}validateLabel(t){n(this,t)}validateOn(t){if(typeof t==="object"&&t!==null){l("[KolTabs] Prüfen, wie man auch einen EventCallback einzeln ändern kann.");const i={};if(typeof t.onCreate==="function"||typeof t.onCreate==="object"){if(typeof t.onCreate==="object"){if(typeof t.onCreate.label==="string"&&t.onCreate.label.length>0){this.onCreateLabel=t.onCreate.label}else{d.debug(`[KolTabs] Der Label-Text für Neu in {\n  onCreate: {\n    label: string (!),\n    callback: Function\n  }\n} ist nicht korrekt gesetzt.`)}if(typeof t.onCreate.callback==="function"){i.onCreate=t.onCreate.callback}else{d.debug(`[KolTabs] Die onCreate-Callback-Funktion für Neu in {\n  onCreate: {\n    label: string,\n    callback: Function (!)\n  }\n} ist nicht korrekt gesetzt.`)}}else{i.onCreate=t.onCreate}this.showCreateTab=typeof i.onCreate==="function"}if(typeof t.onSelect==="function"){i.onSelect=t.onSelect}b(this,"_on",i)}}validateSelected(t){u(this,"_selected",t,{hooks:{beforePatch:this.syncSelectedAndTabs}})}validateTabs(t){c(this,"_tabs",(t=>typeof t==="object"&&t!==null&&typeof t._label==="string"&&t._label.length>0),t,undefined,{hooks:{beforePatch:this.syncSelectedAndTabs}});r("KolTabs",this.state._tabs.length)}validateTabsAlign(t){m(this,"_tabsAlign",t)}componentWillLoad(){this.validateLabel(this._label||this._ariaLabel);this.validateOn(this._on);this.validateSelected(this._selected);this.validateTabs(this._tabs);this.validateTabsAlign(this._tabsAlign)}componentDidRender(){this.handleTabPanels();if(this.tabPanelHost instanceof HTMLDivElement){for(let t=0;t<this.tabPanelHost.children.length;t++){if(t!==this.state._selected){this.tabPanelHost.children[t].setAttribute("hidden","")}else{this.tabPanelHost.children[t].removeAttribute("hidden")}}}}onSelect(t,i,o=false){var e,s;this._selected=i;if(typeof((e=this._on)===null||e===void 0?void 0:e.onSelect)==="function"){(s=this._on)===null||s===void 0?void 0:s.onSelect(t,i)}if(o===true){this.selectedTimeout=setTimeout((()=>{clearTimeout(this.selectedTimeout);if(this.tabPanelsElement){const t=p(`button#tab-${i}`,this.tabPanelsElement);t===null||t===void 0?void 0:t.focus()}}),250)}}get host(){return e(this)}static get watchers(){return{_ariaLabel:["validateAriaLabel"],_label:["validateLabel"],_on:["validateOn"],_selected:["validateSelected"],_tabs:["validateTabs"],_tabsAlign:["validateTabsAlign"]}}};w.style={default:k};export{w as kol_tabs};
//# sourceMappingURL=kol-tabs.entry.js.map