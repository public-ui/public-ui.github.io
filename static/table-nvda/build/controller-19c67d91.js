/*!
 * KoliBri - The accessible HTML-Standard
 */
import{b as t,w as i,s,o as e,p as h}from"./prop.validators-0a66a178.js";import{a as n}from"./label-8d64163d.js";import{g as o,d as a}from"./a11y.tipps-beae7792.js";import{v as d}from"./tab-index-83c69a92.js";import{b as l}from"./dev.utils-5b0de6da.js";const r=t=>{const i=typeof t._error==="string"&&t._error.length>0&&t._touched===true;const s=typeof t._hint==="string"&&t._hint.length>0;const e=[];if(i===true){e.push(`${t._id}-error`)}if(s===true){e.push(`${t._id}-hint`)}return{hasError:i,hasHint:s,ariaDescribedBy:e}};const u=(i,s)=>{t(i,"_adjustHeight",s)};const f=(i,s)=>{t(i,"_touched",s)};const v=l();function c(t,i,s){if(v){if(typeof s==="boolean"||typeof s==="number"||typeof s==="string"){i===null||i===void 0?void 0:i.setAttribute(t,`${s}`)}else{i===null||i===void 0?void 0:i.removeAttribute(t)}}}class p{constructor(t,i,s){var e,h,n,o,a;this.syncFormAssociatedName=()=>{c("id",this.formAssociated,this.component.state._id);c("name",this.formAssociated,this.component.state._name);c("value",this.formAssociated,this.component.state._value)};this.setFormAssociatedValue=(t=null)=>{c("value",this.formAssociated,t);c("value",this.syncToOwnInput,t)};this.component=t;this.name=i;this.host=s;if(v){this.formAssociated=document.createElement("input");this.formAssociated.setAttribute("type","hidden");const t=((e=this.host)===null||e===void 0?void 0:e.children)||[];for(let i=0;i<t.length;i++){if(((h=this.host)===null||h===void 0?void 0:h.children[i].tagName)==="INPUT"){(n=this.host)===null||n===void 0?void 0:n.removeChild((o=this.host)===null||o===void 0?void 0:o.children[i])}}(a=this.host)===null||a===void 0?void 0:a.appendChild(this.formAssociated)}}validateAlert(i){t(this.component,"_alert",i)}validateSyncValueBySelector(t){if(v&&typeof t==="string"){const i=document.querySelector(t);if(i instanceof HTMLInputElement){this.syncToOwnInput=i}}}validateTouched(t){f(this.component,t)}componentWillLoad(){this.validateAlert(this.component._alert);this.validateSyncValueBySelector(this.component._syncValueBySelector);this.validateTouched(this.component._touched)}}class m extends p{constructor(t,i,s){super(t,i,s);this.hideLabel=false;this.valueChangeListeners=[];this.onFacade={onBlur:this.onBlur.bind(this),onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this)};this.component=t}validateAccessKey(t){i(this.component,"_accessKey",t)}validateAdjustHeight(t){u(this.component,t)}validateDisabled(i){t(this.component,"_disabled",i);if(i===true){o()}}validateError(t){i(this.component,"_error",t)}validateHideLabel(i){t(this.component,"_hideLabel",i)}validateHint(t){i(this.component,"_hint",t)}validateId(t){i(this.component,"_id",t,{hooks:{afterPatch:this.syncFormAssociatedName},minLength:1});if(t===""||typeof t==="undefined"){a(`Eine eindeutige ID an den Eingabefeldern ist nicht zwingend erforderlich, könnte aber für die E2E-Tests relevant sein.`)}}validateLabel(t){n(this.component,t)}validateName(t){i(this.component,"_name",t,{hooks:{afterPatch:this.syncFormAssociatedName}});if(typeof t==="undefined"){a(`Ein Name an den Eingabefeldern ist nicht zwingend erforderlich, kann aber für die Autocomplete-Funktion und für das statische Versenden des Eingabefeldes relevant sein.`)}}validateOn(t){if(typeof t==="object"){s(this.component,"_on",t)}}validateSmartButton(t){e(t,(()=>{try{t=h(t)}catch(t){}s(this.component,"_smartButton",t)}))}validateTabIndex(t){d(this.component,t)}componentWillLoad(){super.componentWillLoad();this.validateAccessKey(this.component._accessKey);this.validateAdjustHeight(this.component._adjustHeight);this.validateError(this.component._error);this.validateDisabled(this.component._disabled);this.validateHideLabel(this.component._hideLabel);this.validateHint(this.component._hint);this.validateId(this.component._id);this.validateLabel(this.component._label);this.validateName(this.component._name);this.validateSmartButton(this.component._smartButton);this.validateOn(this.component._on);this.validateTabIndex(this.component._tabIndex);this.syncFormAssociatedName()}onBlur(t){var i;this.component._alert=true;this.component._touched=true;if(typeof((i=this.component._on)===null||i===void 0?void 0:i.onBlur)==="function"){this.component._on.onBlur(t)}}onChange(t){var i;const s=t.target.value;this.setFormAssociatedValue(s);this.valueChangeListeners.forEach((t=>t(s)));if(typeof((i=this.component._on)===null||i===void 0?void 0:i.onChange)==="function"){this.component._on.onChange(t,s)}}onClick(t){var i;if(typeof((i=this.component._on)===null||i===void 0?void 0:i.onClick)==="function"){this.component._on.onClick(t)}}onFocus(t){var i;this.component._alert=true;if(typeof((i=this.component._on)===null||i===void 0?void 0:i.onFocus)==="function"){this.component._on.onFocus(t)}}setValue(t,i){var s;this.setFormAssociatedValue(i);if(typeof((s=this.component._on)===null||s===void 0?void 0:s.onChange)==="function"){this.component._on.onChange(t,i)}}addValueChangeListener(t){this.valueChangeListeners.push(t)}}export{m as I,r as g};
//# sourceMappingURL=controller-19c67d91.js.map