(function(n,w){typeof exports=="object"&&typeof module!="undefined"?w(exports):typeof define=="function"&&define.amd?define(["exports"],w):(n=typeof globalThis!="undefined"?globalThis:n||self,w(n.LeanUpForm={}))})(this,function(n){"use strict";var w=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},f={exports:{}};(function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(w,function(){var e=function(){},t="undefined",s=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function E(a,d){var h=a[d];if(typeof h.bind=="function")return h.bind(a);try{return Function.prototype.bind.call(h,a)}catch(l){return function(){return Function.prototype.apply.apply(h,[a,arguments])}}}function te(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function re(a){return a==="debug"&&(a="log"),typeof console===t?!1:a==="trace"&&s?te:console[a]!==void 0?E(console,a):console.log!==void 0?E(console,"log"):e}function k(a,d){for(var h=0;h<o.length;h++){var l=o[h];this[l]=h<a?e:this.methodFactory(l,a,d)}this.log=this.debug}function ne(a,d,h){return function(){typeof console!==t&&(k.call(this,d,h),this[a].apply(this,arguments))}}function ie(a,d,h){return re(a)||ne.apply(this,arguments)}function G(a,d,h){var l=this,B,u="loglevel";typeof a=="string"?u+=":"+a:typeof a=="symbol"&&(u=void 0);function oe(i){var m=(o[i]||"silent").toUpperCase();if(!(typeof window===t||!u)){try{window.localStorage[u]=m;return}catch(L){}try{window.document.cookie=encodeURIComponent(u)+"="+m+";"}catch(L){}}}function z(){var i;if(!(typeof window===t||!u)){try{i=window.localStorage[u]}catch(ae){}if(typeof i===t)try{var m=window.document.cookie,L=m.indexOf(encodeURIComponent(u)+"=");L!==-1&&(i=/^([^;]+)/.exec(m.slice(L))[1])}catch(ae){}return l.levels[i]===void 0&&(i=void 0),i}}l.name=a,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=h||ie,l.getLevel=function(){return B},l.setLevel=function(i,m){if(typeof i=="string"&&l.levels[i.toUpperCase()]!==void 0&&(i=l.levels[i.toUpperCase()]),typeof i=="number"&&i>=0&&i<=l.levels.SILENT){if(B=i,m!==!1&&oe(i),k.call(l,i,a),typeof console===t&&i<l.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+i},l.setDefaultLevel=function(i){z()||l.setLevel(i,!1)},l.enableAll=function(i){l.setLevel(l.levels.TRACE,i)},l.disableAll=function(i){l.setLevel(l.levels.SILENT,i)};var D=z();D==null&&(D=d==null?"WARN":d),l.setLevel(D,!1)}var c=new G,x={};c.getLogger=function(d){if(typeof d!="symbol"&&typeof d!="string"||d==="")throw new TypeError("You must supply a name when creating a logger.");var h=x[d];return h||(h=x[d]=new G(d,c.getLevel(),c.methodFactory)),h};var se=typeof window!==t?window.log:void 0;return c.noConflict=function(){return typeof window!==t&&window.log===c&&(window.log=se),c},c.getLoggers=function(){return x},c.default=c,c})})(f);class y{constructor(){}static isNumber(e){return isNaN(e)===!1&&typeof e=="number"}static isArray(e,t=0){return Array.isArray(e)&&e.length>=t}static isObject(e){return typeof e=="object"&&e!==null&&this.isArray(e)===!1}static isString(e,t=0){return typeof e=="string"&&e.length>=t}}const O=[];function W(){return"$$NODE_ENV$$"}class g{constructor(){}static log(e,t){switch(y.isObject(t.refObject)&&typeof t.refObject.constructor=="function"&&y.isString(t.refObject.constructor.name)&&(t.className=`[${t.refObject.constructor.name}]:`),O.push({date:new Date().toUTCString(),level:e,message:t}),e){case"trace":f.exports.trace(t);break;case"debug":f.exports.debug(t);break;case"info":f.exports.info(t);break;case"warn":f.exports.warn(t);break;case"error":f.exports.error(t)}}static trace(e,t){return this.log("trace",{messageText:e,refObject:t}),this}static debug(e,t){return this.log("debug",{messageText:e,refObject:t}),this}static info(e,t){return this.log("info",{messageText:e,refObject:t}),this}static warn(e,t){return this.log("warn",{messageText:e,refObject:t}),this}static error(e,t){return this.log("error",{messageText:e,refObject:t}),this}static get cache(){return[].concat(O)}}switch(g._instance=null,W()){case"development":f.exports.setDefaultLevel("trace");break;case"test":f.exports.setDefaultLevel("warn");break;case"production":f.exports.setDefaultLevel("error")}function Z(r,e){return y.isArray(r)?r.find(t=>e instanceof t)!==void 0:!1}function R(r){return r instanceof b?r.get():Array.isArray(r)?r:[r]}class b{constructor(e){this._instancesOf=[],this._items=[],this._protectedItems=[],this._instancesOf=Array.isArray(e)?e:[e]}get empty(){return this._items.length===0}get first(){return this._items.length>0?this._items[0]:null}forEach(e){this._items.forEach(e)}filter(e){return this._items.filter(e)}find(e){return this._items.find(e)}get last(){return this._items.length>0?this._items[this._items.length-1]:null}get length(){return this._items.length}add(e,t=!1){return R(e).filter(s=>{let o=!1;return this.contains(s)===!1?Z(this._instancesOf,s)?(t&&this._protectedItems.push(s),this._items.push(s),o=!0):g.debug("The item does not have a valid instance type.",this):g.debug("The item is already in the list.",this),o}).length>0}remove(e){return R(e).filter(t=>{let s=!1,o=this._protectedItems.indexOf(t);return o===-1?(o=this._items.indexOf(t),o>=0?(this._items.splice(o,1),s=!0):g.debug("The item is not in the list.",this)):g.debug("The item is protected and cannot be removed.",this),s}).length>0}set(e,t=!1){const s=this.clear(),o=this.add(e,t);return s||o}get(e){return isNaN(e)===!1&&typeof e=="number"?this._items.slice(0,e):this._items}clear(){const e=this._items.length;return this._items=this._items.filter(t=>this._protectedItems.indexOf(t)>=0),e!==this._items.length}contains(e){return this._items.indexOf(e)>-1}}class V{}class N{constructor(){this.formatters=new b(V)}format(e){return this.formatters.forEach(t=>{e=t.format(e)}),e}parse(e){return this.formatters.forEach(t=>{e=t.parse(e)}),e}}class v{constructor(e){this.state={message:"Ein unbekannter Fehler ist aufgetreten."},this.message=e}set message(e){y.isString(e,1)?this.state.message=e:g.debug("")}get message(){return this.state.message}}class S{constructor(){this.validators=new b(v)}validate(e,t=!1){const s=[];try{this.validators.forEach(o=>{if(o.isValid(e)===!1&&(s.push(o.message),t===!0))throw new Error("Only one error is enough. Be quick and stop the execution of other validation functions.")})}catch(o){}return s}}class F{constructor(e){this.changeListeners=new b(Function),this._errors=new Set,this._parentForms=[],this._name="unnamed",this._validationHandler=new S,this._notifyTimeout=setTimeout(()=>{},0),this.name=e}get name(){return this._name}set name(e){if(typeof e=="string")if(e.length>0)this._name=e;else throw new Error("The name of a control must have a min-length of 1.");else throw new Error("The name of a control must be a string.")}get error(){return this._errors.size>0?this._errors.values().next().value:null}getErrors(){return this._errors}get id(){let e=this.name;return this._parentForms.length>0&&(e=`${this._parentForms[0].id}_${e}`),e}get valid(){return this._errors.size===0}es5isValid(){return this._errors.size===0}findMeInParentForm(e){if(this===e)return!0;if(e instanceof p){const t=[];return this._parentForms.forEach(s=>{s.findMeInParentForm(e)===!0&&t.push(s)}),t.length>0}else return!1}addParentForm(e){if(this._parentForms.includes(e)===!1)if(e.findMeInParentForm(this)===!1)this._parentForms.push(e);else throw new Error(`The same form control (${e.name}) leads to a form control loop.`);else throw new Error(`An form control with the name '${e.name}' already exists.`)}removeParentForm(e){const t=this._parentForms.indexOf(e);if(t>=0)this._parentForms.splice(t,1);else throw new Error(`An form control with the name '${e.name}' does not exists.`)}setValidationHandler(e,t=null){this._validationHandler=e,this.validate(t)}validate(e){this._errors.clear(),this._validationHandler.validate(e).forEach(s=>{this._errors.add(s)}),this._parentForms.forEach(s=>{s.validate(e)})}notify(){this._notifyTimeout&&clearTimeout(this._notifyTimeout),this._notifyTimeout=setTimeout(()=>{this.changeListeners.forEach(e=>{e()})},0)}}n.InputControlTypes=void 0,function(r){r.checkbox="checkbox",r.date="date",r.email="email",r.number="number",r.password="password",r.radio="radio",r.select="select",r.slider="slider",r.text="text"}(n.InputControlTypes||(n.InputControlTypes={}));class T extends F{constructor(e,t){super(e);this._disabled=!1,this._info="",this._label="",this._mandatory=!1,this._placeholder="",this._readonly=!1,this._type="text",this._value=null,this._oldValue=null,this._valueTimeout=setTimeout(()=>{},0),this._formatHandler=new N,t&&(this.info=t.info?t.info:"",this.label=t.label?t.label:"",this.disabled=t.disabled?t.disabled:!1,this.mandatory=t.mandatory?t.mandatory:!1,this.readonly=t.readonly?t.readonly:!1,this.placeholder=t.placeholder?t.placeholder:"",this.type=t.type?t.type:"text",this.value=t.value?t.value:null)}get info(){return this._info}set info(e){if(typeof e=="string")this._info=e,this.notify();else throw new Error("The info of a input control must be a string.")}get disabled(){return this._disabled}set disabled(e){if(typeof e=="boolean")this._disabled=e,this.notify();else throw new Error("The disabled flag of a input control must be a string.")}get mandatory(){return this._mandatory}set mandatory(e){if(typeof e=="boolean")this._mandatory=e,this.notify();else throw new Error("The mandatory flag of a input control must be a string.")}get readonly(){return this._readonly}set readonly(e){if(typeof e=="boolean")this._readonly=e,this.notify();else throw new Error("The readonly flag of a input control must be a string.")}get label(){return this._label}set label(e){if(typeof e=="string")this._label=e,this.notify();else throw new Error("The label of a input control must be a string.")}get placeholder(){return this._placeholder}set placeholder(e){if(typeof e=="string")this._placeholder=e,this.notify();else throw new Error("The placeholder of a input control must be a string.")}get type(){return this._type.toString()}set type(e){if(typeof e=="string")switch(e){case"checkbox":case"date":case"email":case"number":case"password":case"radio":case"select":case"slider":case"text":this._type=e,this.notify();break;default:throw new Error("The type of a input control must be a of the following types: ???.")}else throw new Error("The type of a input control must be a string.")}get oldValue(){return this._oldValue}get value(){return this._value}set value(e){this._valueTimeout&&clearTimeout(this._valueTimeout),this._valueTimeout=setTimeout(()=>{this.validate(e),this._oldValue=this._value,this._value=e,this.notify()},0)}get modelValue(){return this.value}set modelValue(e){this.value=e}get viewValue(){return this._formatHandler.format(this.modelValue)}set viewValue(e){this.modelValue=this._formatHandler.parse(e)}setValidationHandler(e){super.setValidationHandler(e,this.value)}setFormatHandler(e){this._formatHandler=e}}class p extends F{constructor(){super(...arguments);this.controls=new b([p,T])}get disabled(){return this.controls.filter(e=>e.disabled===!1).length===0}set disabled(e){this.controls.forEach(t=>{t.disabled=e})}get readonly(){return this.controls.filter(e=>e.readonly===!1).length===0}set readonly(e){this.controls.forEach(t=>{t.readonly=e})}get valid(){return this.es5isValid()&&this.controls.filter(e=>e.valid===!1).length===0}addConrol(e){if(this.controls.contains(e)===!1)e.addParentForm(this),this.controls.add(e);else throw new Error(`A control with the same name '${e.name}' already exists.`)}removeControl(e){if(this.controls.contains(e)===!0)e instanceof F&&(e.removeParentForm(this),this.controls.remove(e));else throw new Error(`A control with the name '${e.name}' does not exists.`)}getControls(){return this.controls.get()}getControl(e){return this.controls.find(t=>t.name===e)}setData(e){console.log("FormControl.setData is currently not implemented.")}getData(){const e={};return this.controls.forEach(t=>{if(t instanceof p)e[t.name]=t.getData();else if(t instanceof T)e[t.name]=t.value;else throw new Error("The control is neither an instance of FormControl or InputControl.")}),e}setValidationHandler(e){super.setValidationHandler(e)}}class I{static createForm(e,t){const s=new p(e);for(const o in t)if(t.hasOwnProperty(o))if(typeof t[o]=="object"&&t[o]!==null)s.addConrol(I.createForm(o,t[o]));else{const E=new T(o);E.value=t[o],s.addConrol(E)}return s}}class C extends V{constructor(){super(...arguments);this.regExp=/([A-Z0-9]{1,4})/gi}format(e){if(typeof e=="string"){const t=e.match(this.regExp);if(Array.isArray(t))return t==null?void 0:t.join(" ")}return e}parse(e){return typeof e=="string"?e.replace(/ /g,""):e}}const q=new C;class M extends v{constructor(e="Bitte tragen Sie einen Wert ein."){super(e)}isValid(e){return e!=null&&e.toString().length>0}}const P=new M;class _ extends v{isValid(e){return P.isValid(e)===!1||this.validate(e)}}class A extends _{constructor(e,t="Bitte tragen Sie einen g\xFCltigen Wert ein."){super(t);this._regExp=/^/g,this.regExp=e}set regExp(e){e instanceof RegExp?this._regExp=e:g.debug("The regExp of the pattern validator should be type of RegExp.")}get regExp(){return this._regExp}validate(e){return this.regExp.test(e)}}class j extends A{validate(e){return super.validate(e)===!1}}const H=/^\d+$/;class U extends A{constructor(e="Der Wert ist keine Zahl."){super(H,e)}}const X=new U,$=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;class Q extends A{constructor(e="Die E-Mail-Adresse hat nicht das richtige Format."){super($,e)}}class K extends _{constructor(e="Bitte best\xE4tigen Sie."){super(e)}validate(e){return e===!0}}class Y extends _{constructor(e,t=`Die Eingabe darf nicht l\xE4nger als ${e} Zeichen sein.`){super(t);this.maxLength=e}validate(e){return y.isString(e)&&e.length<=this.maxLength}}class J extends _{constructor(e,t=`Die Eingabe darf nicht k\xFCrzer als ${e} Zeichen sein.`){super(t);this.minLength=e}validate(e){return y.isString(e)&&e.length>=this.minLength}}class ee extends _{constructor(e,t){super(t);this.validator=e}validate(e){return this.validator.isValid(e)===!1}}n.AbstractFormatter=V,n.AbstractValidator=v,n.DEFAULT_DIGITS_VALIDATOR=X,n.DEFAULT_IBAN_FORMATTER=q,n.DEFAULT_REQUIRED_VALIDATOR=P,n.DIGITS_VALIDATION_REGEXP=H,n.DigitsValidator=U,n.EMAIL_VALIDATION_REGEXP=$,n.EmailValidator=Q,n.FormControl=p,n.FormFactory=I,n.FormatHandler=N,n.IbanFormatter=C,n.InputControl=T,n.IsTrueValidator=K,n.MaxLengthValidator=Y,n.MinLengthValidator=J,n.NonRequiredValidator=_,n.NotPatternValidator=j,n.NotValidator=ee,n.PatternValidator=A,n.RequiredValidator=M,n.ValidationHandler=S,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=bundle.js.map
